<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
     <title>Fish/Fishing</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" /> 
    <link rel="stylesheet" href="css/recreation_maps_style.css" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Maven+Pro" rel="stylesheet">
    <link rel="stylesheet" href="css/perfect-scrollbar.css" />
    
    <link rel="shortcut icon" href="img/pnw.ico" type="image/x-icon">
    
    <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="js/perfect-scrollbar.js"></script>
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    <script src="https://unpkg.com/leaflet.vectorgrid@latest/dist/Leaflet.VectorGrid.bundled.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script type="text/javascript" src="../js/clickFunction.js"></script>
    
   
</head>
<body>
		<button id="collapse" onclick="collapse()">
			<i class="fa fa-chevron-left" id ="collapse-arrow" aria-hidden="true"></i>
		</button>
		<div id="infoPanel">
			<div id="top">
				<h1 style="margin-bottom:25px;">Fish & Fishing</h1>
				<img src="img/fish_icon.png" id="titleImage" style="height:20px;"> <br/>
				<div id="buttons">
					<div class="dropdown">
						<button class="dropbtn"><b id="dataType">Select Species</b><p id="arrow">&#9660;</p></button>
						<div class="dropdown-content">
							 <button type="button" id="but1" class="selection" style="background:rgba(242, 242, 242, 0.8);">Chinook</button>
							 <button type="button" id="but2" class="selection">Steelhead</button>
							 <button type="button" id="but3" class="selection">Coho</button>
							 <button type="button" id="but4" class="selection">Chum</button>
							 <button type="button" id="but5" class="selection">Pink</button>
							 <button type="button" id="but6" class="selection">Sockeye</button>
					   </div>
					</div>
				</div>
			</div>
			<div id="attribution">
				<div id="text">
					<div id="leg_1">
						<h2 id="title">Chinook Salmon</h2>
						<br>
						<div id ="none" style="height:32px;"><b style="background:#3abfbd; border-left:black 2px solid; border-right:black 2px solid; border-top:black 2px solid;"></b><p>&nbsp</p><p id="leg1">&nbspLeast Concern</p></div>
						<div id ="threat" style="height:30px;"><b style="background:#9de1e0; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg1">&nbspThreatened</p></div>
						<div id ="end" style="height:30px;"><b style="background:#f9d2de; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg1">&nbspEndangered</p></div>
						<div id ="hist" style="height:32px;"><b style="background:#ed789b; border-left:black 2px solid; border-right:black 2px solid; border-bottom:black 2px solid;"></b><p>&nbsp</p><p id="leg2">&nbspHistorical Habitat</p></div><br/>
						<p id="description" style="font-weight:bold; padding:0; display:block; white-space:normal; width:280px;">Current population status and historical distribution of Chinook Salmon</p>
						</br></br>
						<img src="img/chinook2.png" id="fishImage" style="display:block;"><br/>
						<div id="checklist">
							<p id="checkText" style="padding-right:5px; padding-left:0px; font-weight:bold; position:relative; float:left;">Fall Run</p>
								<label class="switch" style="margin-top:5px;">
									<input name="checkbox_name" id="checkbox" type="checkbox" onclick="selectRun()" autocomplete="off">
									<span class="slider"></span>
								</label>
							<p id="checkText2" style="padding-left:5px; font-weight:bold;">Spring Run</p><br/>
						</div>
					</div>
					<div id="leg_2" style="display:none;">
						<h2 id="title">Steelhead</h2>
						<br>
						<div id ="none" style="height:32px;"><b style="background:#3abfbd; border-left:black 2px solid; border-right:black 2px solid; border-top:black 2px solid;"></b><p>&nbsp</p><p id="leg1">&nbspLeast Concern</p></div>
						<div id ="threat" style="height:30px;"><b style="background:#9de1e0; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg1">&nbspThreatened</p></div>
						<div id ="hist" style="height:32px;"><b style="background:#ed789b; border-left:black 2px solid; border-right:black 2px solid; border-bottom:black 2px solid;"></b><p>&nbsp</p><p id="leg2">&nbspHistorical Habitat</p></div><br/>
						<p id="description" style="font-weight:bold; padding:0; display:block; white-space:normal; width:280px;">Current population status and historical distribution of Steelhead</p>
						</br></br>
						<img src="img/steelhead2.png" id="fishImage" style="display:block;">
					</div>
					<div id="leg_3" style="display:none;">
						<h2 id="title">Coho Salmon</h2>
						<br>
						<div id ="none" style="height:32px;"><b style="background:#3abfbd; border-left:black 2px solid; border-right:black 2px solid; border-top:black 2px solid;"></b><p>&nbsp</p><p id="leg1">&nbspLeast Concern</p></div>
						<div id ="threat" style="height:30px;"><b style="background:#9de1e0; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg1">&nbspThreatened</p></div>
						<div id ="hist" style="height:32px;"><b style="background:#ed789b; border-left:black 2px solid; border-right:black 2px solid; border-bottom:black 2px solid;"></b><p>&nbsp</p><p id="leg2">&nbspHistorical Habitat</p></div><br/>
						<p id="description" style="font-weight:bold; padding:0; display:block; white-space:normal; width:280px;">Current population status and historical distribution of Coho Salmon</p>
						</br></br>
						<img src="img/soho.png" id="fishImage" style="display:block;">
					</div>
					<div id="leg_4" style="display:none;">
						<h2 id="title">Chum Salmon</h2>
						<br>
						<div id ="none" style="height:32px;"><b style="background:#3abfbd; border-left:black 2px solid; border-right:black 2px solid; border-top:black 2px solid;"></b><p>&nbsp</p><p id="leg1">&nbspLeast Concern</p></div>
						<div id ="threat" style="height:30px;"><b style="background:#9de1e0; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg1">&nbspThreatened</p></div>
						<div id ="hist" style="height:32px;"><b style="background:#ed789b; border-left:black 2px solid; border-right:black 2px solid; border-bottom:black 2px solid;"></b><p>&nbsp</p><p id="leg2">&nbspHistorical Habitat</p></div><br/>
						<p id="description" style="font-weight:bold; padding:0; display:block; white-space:normal; width:280px;">Current population status and historical distribution of Chum Salmon</p>
						</br></br>
						<img src="img/chum2.png" id="fishImage" style="display:block;"><br/>
						<div id="checklist">
							<p id="checkText" style="padding-right:5px; padding-left:0px; font-weight:bold; position:relative; float:left;">Fall Run</p>
								<label class="switch" style="margin-top:5px;">
									<input name="checkbox_name" id="checkbox2" type="checkbox" onclick="selectRun()" autocomplete="off">
									<span class="slider"></span>
								</label>
							<p id="checkText2" style="padding-left:5px; font-weight:bold;">Summer Run</p><br/>
						</div>
					</div>
					<div id="leg_5" style="display:none;">
						<h2 id="title">Pink Salmon</h2>
						<br>
						<div id ="none" style="height:32px;"><b style="background:#3abfbd; border-left:black 2px solid; border-right:black 2px solid; border-top:black 2px solid;"></b><p>&nbsp</p><p id="leg1">&nbspLeast Concern</p></div>
						<div id ="hist" style="height:32px;"><b style="background:#ed789b; border-left:black 2px solid; border-right:black 2px solid; border-bottom:black 2px solid;"></b><p>&nbsp</p><p id="leg2">&nbspHistorical Habitat</p></div><br/>
						<p id="description" style="font-weight:bold; padding:0; display:block; white-space:normal; width:280px;">Current population status and historical distribution of Pink Salmon</p>
						</br></br>
						<img src="img/pink2.png" id="fishImage" style="display:block;"><br/>
						<div id="checklist">
							<p id="checkText" style="padding-right:5px; padding-left:0px; font-weight:bold; position:relative; float:left;">Odd Year</p>
								<label class="switch" style="margin-top:5px;">
									<input name="checkbox_name" id="checkbox3" type="checkbox" onclick="selectRun()" autocomplete="off">
									<span class="slider"></span>
								</label>
							<p id="checkText2" style="padding-left:5px; font-weight:bold;">Even Year</p><br/>
						</div>
					</div>
					<div id="leg_6" style="display:none;">
						<h2 id="title">Sockeye Salmon</h2>
						<br>
						<div id ="none" style="height:32px;"><b style="background:#3abfbd; border-left:black 2px solid; border-right:black 2px solid; border-top:black 2px solid;"></b><p>&nbsp</p><p id="leg1">&nbspLeast Concern</p></div>
						<div id ="threat" style="height:30px;"><b style="background:#9de1e0; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg1">&nbspThreatened</p></div>
						<div id ="end" style="height:30px;"><b style="background:#f9d2de; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg1">&nbspEndangered</p></div>
						<div id ="hist" style="height:32px;"><b style="background:#ed789b; border-left:black 2px solid; border-right:black 2px solid; border-bottom:black 2px solid;"></b><p>&nbsp</p><p id="leg2">&nbspHistorical Habitat</p></div><br/>
						<p id="description" style="font-weight:bold; padding:0; display:block; white-space:normal; width:280px;">Current population status and historical distribution of Sockeye Salmon</p>
						</br></br>
						<img src="img/sockeye2.png" id="fishImage" style="display:block;">
					</div>
					<br/>
					<!--<p3 id="information">Chinook salmon (also known as King Salmon) are the largest of the Pacific salmon, with some individuals growing to more than 100 pounds. These huge fish are rare, as most mature chinook are under 50 pounds.</p3> <br/><br/>Most chinook spawn in large rivers such as the Columbia and Snake, although they will also use smaller streams with sufficient water flow. They tend to spawn in the mainstem of streams, where the water flow is high. Because of their size they are able to spawn in larger gravel than most other salmon. Chinook spawn on both sides of the Cascade Range, and some fish travel hundreds of miles upstream before they reach their spawning grounds. Because of the distance, these fish enter streams early and comprise the spring and summer runs. Fall runs spawn closer to the ocean and more often use small coastal streams. All chinook reach their spawning grounds by fall, in time to spawn.<br/><br/>Chinook fry rear in freshwater from three months to a year, depending on the race of chinook and the location. Spring chinook tend to stay in streams for a year; fish in northern areas, where the streams are less productive and growth is slower, also tend to stay longer. Rearing chinook fry use mainstems and their tributaries.</p3>
				-->	<div id="facts_1" style="display:unset;">
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts" style="line-height:20px;">&#9900 Also known as King Salmon.<br/><br/>&#9900 Chinook are the largest Pacific Salmon. The largest ever recorded weighed 126 pounds.<br/><br/>&#9900 Individuals over 30 pounds are known as Tyee Salmon.</p3>
					</div>
					<div id="facts_2" style="display:none;">
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts" style="line-height:20px;">&#9900 Anadromous (ocean-going) version of rainbow trout.<br/><br/>&#9900 Maximum size 40 pounds.<br/><br/>&#9900 Unlike salmon, Steelhead, may survive spawning, and can therefore spawn more than once in their lifetime.</p3>
					</div>
					<div id="facts_3" style="display:none;">
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts" style="line-height:20px;">&#9900 Maximum size 30 pounds.<br/><br/>&#9900 Juvenile Coho are highly territorial.<br/><br/>&#9900 Coho can be found in urban streams if water quality needs are met.</p3>
					</div>
					<div id="facts_4" style="display:none;">
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts" style="line-height:20px;">&#9900 Also known as Dog Salmon due to canine-like teeth in spawning males.<br/><br/>&#9900 Maximum size 30 pounds.<br/><br/>&#9900 “Calico” coloration during spawning.</p3>
					</div>
					<div id="facts_5" style="display:none;">
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts" style="line-height:20px;">&#9900 Also known as humpback salmon.<br/><br/>&#9900 Maximum size 12 pounds.<br/><br/>&#9900 Consistent two-year life cycle.</p3>
					</div>
					<div id="facts_6" style="display:none;">
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts" style="line-height:20px;">&#9900 Sockeye are known as the most flavorful Pacific Salmon.<br/><br/>&#9900 Maximum size 15 pounds.<br/><br/>&#9900 Only spawn in lake-fed water systems.</p3>
					</div>
				</div>
				<div id="pageChange">
					<a href="activities_index.html" id="arrow" style="display:inline-block;">
						<i class="fa fa-arrow-left" aria-hidden="true" style=""></i>
					</a>
					<a href="#popup1" id="arrow" style="display:inline-block;">
						<i class="fa fa-info-circle" aria-hidden="true" style="padding-left:83px;"></i>
					</a>
					<a href="rec_index.html" id="arrow" style="display:inline-block;">
						<i class="fa fa-home" aria-hidden="true" style="padding-left:0;"></i>
					</a>
					<a href="economic_index.html" id="arrow" style="display:inline-block;">
						<i class="fa fa-arrow-right" aria-hidden="true" style="padding-left:82px;"></i>
					</a>
				</div>
			</div>
		</div>
    	<div id="map" style="width: 100%; height: 100%;"></div>
    	
    	<div id="popup1" class="overlay">
			<div class="popup">
				<h2 style="display:inline; font-size:32px;">Sources</h2>
				<a class="close" href="#" style="display:inline;">×</a>
				<hr>
				<div class="content">
					<p2 style="font-size:20px">Geographic Data</p2><br><br/>
                    <div class="source">
                    	<b><p2>Salmon and Steelhead DPS/ESU Boundaries: <a href = "http://www.westcoast.fisheries.noaa.gov/maps_data/Species_Maps_Data.html" target="_blank">National Oceanic and Atmospheric Administration Fisheries Department</a></p2></b><br>
                    </div>
				</div>
				<hr>
				<p2 style="float:right; font-size:12px;">Map created with Leaflet.</p2>
				<br/>
				<a class="close2" href="#" style="display:inline;">Close</a>
			</div>
		</div>

<script>
//////////////base functions (these never change)///////////////////////
	//////////////function that allows topojson layers to be loaded///////////////////////
	L.TopoJSON = L.GeoJSON.extend({  
  		addData: function(jsonData) {    
    		if (jsonData.type === 'Topology') {
      			for (key in jsonData.objects) {
       			 geojson = topojson.feature(jsonData, jsonData.objects[key]);
       			 L.GeoJSON.prototype.addData.call(this, geojson);
      		}
    	}    
    	else {
      		L.GeoJSON.prototype.addData.call(this, jsonData);
    		}
  		}  
	});
	//////////////function for the info panel collapse button///////////////////////	
	var collapsed = false;
    function collapse(){
    	if (collapsed == false){
    		document.getElementById("infoPanel").style.transition = "display 2s";
    		document.getElementById("infoPanel").style.display = "none";
    		document.getElementById("collapse").style.left = '0px';
    		document.getElementById("collapse").style.paddingLeft = '2px';
    		document.getElementById("collapse-arrow").className = "fa fa-chevron-right";
    		collapsed = true;
    	} else{
    		document.getElementById("infoPanel").style.display = "unset";
    		document.getElementById("collapse").style.left = '320px';
    		document.getElementById("collapse").style.paddingLeft = '0px';
    		document.getElementById("collapse-arrow").className = "fa fa-chevron-left";
    		collapsed = false;
    	}
    	
    }
//////////////Initialize map///////////////////////
	var map = L.map('map', {center: [45.56, -119.75], zoom: 7, zoomControl:false});
	//map.setMaxBounds(map.getBounds());
///////////////////////make zoom level correspond to browser size////////////////////////////////
	window.addEventListener('load', function(event){
    	var width = document.documentElement.clientWidth;
    	if (width < 1500 && width > 800) {
        	map.setView(new L.LatLng(45.56, -121.75), 6); 
    		}  else if (width > 1501) {
        	map.setZoom(7);
        	} else {
        	map.setZoom(5);
        	}
	});
////////////////////////////////basemap layers////////////////////////////////
	var Esri_WorldTerrain = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}', {
		attribution: 'Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS',
		maxZoom:8,
		minZoom:5
	}).addTo(map);
	
	var pnwCover = L.tileLayer.wms('http://mapious.ceoas.oregonstate.edu/geoserver/baldricg_PNW_ATLAS/wms', {
		layers: 'baldricg_PNW_ATLAS:pnw_outline2_black',
        format: 'image/png',
		maxZoom:11,
		minZoom:5,
		opacity:0.3,
		transparent:true,
	}).addTo(map);
	
	var label = L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_only_labels/{z}/{x}/{y}@2x.png', {
		attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
		subdomains: 'abcd',
		maxZoom:10,
		minZoom:5,
		tileSize:256,
		bounds:[
			new L.LatLng(49.56,-125.25),
			new L.LatLng(40.5,-111.5)
		],
		pane:'labels'
	});	
	
    var pnwStates = $.getJSON("assets/pnw_states.geojson", function(data){
        pnwStates = L.geoJson(data, {
        	style:function pnwStatesStyle(){
				return{
					opacity: 0.3,
					color:'#000000',
					fillOpacity:0,
					fillColor:'#000000',
					weight:1
				};
			}
        }).addTo(map);
    });
    var pnwCounties = $.getJSON("assets/counties2.geojson", function(data){
        pnwCounties = L.geoJson(data, {
        	style: function pnwCountiesStyle(){
				return{
					opacity: 0.1,
					color:'#000000',
					fillOpacity:0,
					fillColor:'#000000',
					weight:1
				};
			}
        }).addTo(map);
    });
    function riverSize(e){
        return e > 400000 ? 2.5 :
        	   e > 200000 ? 2 :
        	   e > 300000 ? 1.5 :
        	   e > 50000 ? 1 :
        		0.5;
    	}   
    function riverStyle(feature){
	return{
		opacity: 0.2,
		color:'#80bfff',
		weight: riverSize(feature.properties.length_1)
		};
	}
    var	rivers = $.getJSON("assets/rivers.geojson", function(data){
        rivers = L.geoJson(data, {
        	style:riverStyle
        }).addTo(map);
    });
	//lakes      
    function lakeStyle(feature){
	return{
		opacity: 0,
		fillColor:'#80bfff',
		fillOpacity:0.3
		};
	}
    var	lakes = $.getJSON("assets/lakes.geojson", function(data){
        lakes = L.geoJson(data, {
        	style:lakeStyle
        }).addTo(map);
    });
	
	map.createPane('labels');
	map.getPane('labels').style.pointerEvents = 'none';
	map.getPane('labels').style.zIndex = 650;
	label.addTo(map);
	
///////////////////////important variables////////////////////////////////
	var data = 1;
	var run = 0;
	
////////////////////////////display layers//////////////////////
    ////////////////////////////fish layer//////////////////////
    const fish = new L.TopoJSON();

	$.getJSON('assets/chinook.json')
  		.done(addFishData);

	function addFishData(topoData) {  
  		fish.addData(topoData);
  		fish.addTo(map);
  		fish.eachLayer(handleLayer);
	}

	function setColor(value, status){
        return value === 'Accessible' &&  status === 'Not Warranted' ? '#3abfbd' :
        	   value === 'Accessible' &&  status === 'Threatened' ? '#9de1e0' :
        	   value === 'Accessible' &&  status === 'Endangered' ? '#f9d2de' :
        		'#ed789b';
    	}
    	
    function setOpacity(type){
    	if (run == 0){
    		return type == 0 || type == 1 ?  0.7:
    			0;
    	}
    	if (run == 1){
    		return type == 0 || type == 2 ?  0.7:
    			0;
    	}
    }
    function handleLayer(layer){
        layer.setStyle({
          fillColor: setColor(layer.feature.properties.CLASS, layer.feature.properties.STATUS),
            	fillOpacity: setOpacity(layer.feature.properties.run_num),
            	weight: 1,
            	opacity: setOpacity(layer.feature.properties.run_num),
            	color: setColor(layer.feature.properties.CLASS, layer.feature.properties.STATUS),
        });
    }
	
    //changes when checkbox is selected
    function selectRun () {
    	if (document.getElementById('checkbox').checked == true || document.getElementById('checkbox2').checked == true || document.getElementById('checkbox3').checked == true){
    		run = 1;
    		fish.eachLayer(handleLayer);
   		}
    	else {
    		run = 0;
    		fish.eachLayer(handleLayer);
    	}
    }

///////////////////////////////button function////////////////////////////////	
	var buttonLabels = ['#but1','#but2','#but3','#but4','#but5','#but6'];

	var buttonFunctions = {
		but1: {button:'but1', newLegend: 'leg_1', newElements:['facts_1'], title:'Chinook', variable:1, layerFunction:function(){resizeMiddle();resetData();}},
		but2: {button:'but2', newLegend: 'leg_2', newElements:['facts_2'], title:'Steelhead',  variable:2, layerFunction:function(){resizeMiddle();resetData();}},
		but3: {button:'but3', newLegend: 'leg_3', newElements:['facts_3'], title:'Coho',  variable:3, layerFunction:function(){resizeMiddle();resetData();}},
		but4: {button:'but4', newLegend: 'leg_4', newElements:['facts_4'], title:'Chum',  variable:4, layerFunction:function(){resizeMiddle();resetData();}},
		but5: {button:'but5', newLegend: 'leg_5', newElements:['facts_5'], title:'Pink',  variable:5, layerFunction:function(){resizeMiddle();resetData();}},
		but6: {button:'but6', newLegend: 'leg_6', newElements:['facts_6'], title:'Sockeye',  variable:6, layerFunction:function(){resizeMiddle();resetData();}}
	};
	
	$('.main1').clickFunction({
		buttonFunctions: buttonFunctions,
		buttonLabels: buttonLabels,
		selected:buttonFunctions.but1
	});

	function resetData(){
		if (data == 1){
			fish.clearLayers();
    		$.getJSON('assets/chinook.json').done(addFishData);
    		$("#checkbox").prop("checked", false);
    		run = 0;
    		fish.eachLayer(handleLayer);
		}
		if (data == 2){
			fish.clearLayers();
    		$.getJSON('assets/steelhead.json').done(addFishData);
    		run = 0;
    		fish.eachLayer(handleLayer);
		}
		if (data == 3){
			fish.clearLayers();
    		$.getJSON('assets/coho.json').done(addFishData);
    		run = 0;
    		fish.eachLayer(handleLayer);
		}
		if (data == 4){
			fish.clearLayers();
    		$.getJSON('assets/chum.json').done(addFishData);
    		$("#checkbox2").prop("checked", false);
    		run = 0;
    		fish.eachLayer(handleLayer);
		}
		if (data == 5){
			fish.clearLayers();
    		$.getJSON('assets/pink.json').done(addFishData);
    		$("#checkbox3").prop("checked", false);
    		run = 0;
    		fish.eachLayer(handleLayer);
		}
		if (data == 6){
			fish.clearLayers();
    		$.getJSON('assets/sockeye.json').done(addFishData);
    		run = 0;
    		fish.eachLayer(handleLayer);
		}
	}

///////////////////////////////other miscellaneous functions (these also never change)////////////////////////////////   

    new L.Control.Zoom({ position: 'topright' }).addTo(map);
	document.getElementsByClassName("leaflet-control-attribution")[0].style.visibility = "hidden";
	//add scrolling capabilities to text box
     var container = document.getElementById('text');
		Ps.initialize(container);
	
	var minHeight = 30; // Define a minimum height for the middle div

	function resizeMiddle() {
   		var h = $('body').height() - $('#top').height() - 95;
    		h = h > minHeight ? h : minHeight;
   	 	$('#attribution').height(h);
	}

	$(document).ready(resizeMiddle);
	$(window).resize(resizeMiddle);    
	
    //remove standard leaflet attribution
    

</script>
</body>
</html>
