<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-126191723-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	  gtag('config', 'UA-126191723-1');
	</script>
    
    <title>Outdoor Activities</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" /> 
    <link rel="stylesheet" href="css/recreation_maps_style.css" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Maven+Pro" rel="stylesheet">
    <link rel="stylesheet" href="css/perfect-scrollbar.css" />
    <link rel="stylesheet" href="css/leaflet-search.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <link rel="shortcut icon" href="img/pnw.ico" type="image/x-icon">
    
    <meta property="og:title" content="Atlas of the Pacific Northwest: Outdoor Activities" />
    <meta property="og:url" content="http://pnwatlas.oregonstate.edu/recreation/activities.html" />
    <meta property="og:description" content="Outdoor Activity maps of the Pacific Northwest."/>
   
    <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
    <script type="text/javascript" src="js/leaflet-search.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    <script type="text/javascript" src="../js/clickFunction.js"></script>
    <script src="js/perfect-scrollbar.js"></script>
    
    <link rel="stylesheet" href="../css/introjs.css" />
    <script src="../js/intro.js"></script>
    
</head>
<body>
		<div id="navbar">
			<a href="#nav_popup" id="banner1" style="display:inline; right:110px;">Chapters</a>
			<a href="../index.html" id="banner1" style="display:inline; right:10px;">Home</a>
			<a href="../index.html" id="banner2" style="display:inline; left:5px;">Atlas of the Pacific Northwest</a>
		</div>
		<div id="nav_popup" class="nav_overlay">
			<div class="nav_popup">
				<a class="close" href="#" style="display:inline;">Ã—</a>
				<div class="content">
					<a href="../index.html" style="font-weight:bold; text-decoration:none; font-size:24px;">Home</a>
					<hr>
					<a href="../food/food_home.html" style="text-decoration:underline;">Agriculture & Food</a>
					<a href="../history/history_home.html" style="text-decoration:underline;">Culture & History</a>
					<a href="../energy/energy_home.html" style="text-decoration:underline;">Energy Resources</a>
					<a href="../hazards/hazard_home.html" style="text-decoration:underline;">Natural Hazards</a>
					<a href="recreation/recreation_home.html" style="text-decoration:underline;">Outdoor Recreation</a>
					<a href="../population/population_home.html" style="text-decoration:underline;">Population & Housing</a>
					<a href="../water/water_home.html" style="text-decoration:underline;">Water</a>
					<a href="../wildlife/wildlife_home.html" style="text-decoration:underline;">Wildlife</a>
				</div>
			</div>
		</div>
		<button id="collapse" onclick="collapse()">
			<i class="fa fa-chevron-left" id ="collapse-arrow" aria-hidden="true"></i>
		</button>
		<div id="infoPanel">
			<div id="top">
				<h1>Outdoor Activities</h1>
				<img src="img/activities_icon.png" id="titleImageCircle"> <br/>
				<div id="buttons" data-step="1" data-intro="Use the dropdown menu to select different datasets for display.">
					<div class="dropdown">
						<button class="dropbtn"><b id="dataType">Select Map</b><p id="arrow">&#9660;</p></button>
						<div class="dropdown-content">
							<button type="button" id="but1" class="selection" style="float:left; display:inline; background:rgba(242, 242, 242, 0.8);">Camping</button>
							<button type="button" id="but2" class="selection" style="float:right; display:inline;">Skiing</button>
							<button type="button" id="but3" class="selection" style="float:left; display:inline;">Mountaineering</button>
							<button type="button" id="but4" class="selection" style="float:right; display:inline;">Rafting</button>
					   </div>
					</div>
				</div>
				<label class="switchBorder" data-step="3" data-intro="Use the slider to toggle the display of politial borders.">
					<input name="border_checkbox" id="borderbox" type="checkbox" value="check" onclick="borders()" autocomplete="off" checked>
					<div class="sliderBorder"><!--ADDED HTML --><span class="on">X</span><span class="border">Political Borders</span><!--END--></div>		
				</label>
			</div>
			<div id="attribution">
				<div id="text" data-step="2" data-intro="Each dataset has a specific legend, displayed here.">
					<div id="leg_1" style="display:unset;">
						<h1 class="activity" style="margin-bottom:0; font-variant:normal;letter-spacing:0;">Camping</h1><!--initial activity displayed--><br/>
						<h2 id="title" style="display:inline-block; line-height:8px;"># of Campsites</h2><h2 id="title" style="padding-left:24px;display:inline-block;line-height:8px;">Owner</h2>
						<div style="width: 150px; display:inline-block;"><b class ="circle" style="width:22px; height:22px;"></b><p id="leg1" style="padding-left:20px; position:relative; margin-bottom:5px;">200+</p></div><div style="display:inline-block; margin-left:20px;"><b class ="circle" style="background:#0066cc; width:22px; height:22px; border:none;"></b><p style="padding-left:20px; line-height:20px;">Federal</p></div>
						<div style="width: 150px; display:inline-block;"><b class ="circle" style="width:18px; height:18px;"></b><p id="leg2" style="padding-left:24px; position:relative; margin-bottom:5px;">100 - 200</p></div><div style="display:inline-block; margin-left:20px;"><b class ="circle" style="background:#377e35; width:22px; height:22px; border:none;"></b><p style="padding-left:20px; line-height:20px;">State</p></div>
						<div style="width: 150px; display:inline-block;"><b class ="circle" style="width:14px; height:14px;"></b><p id="leg3" style="padding-left:28px; position:relative; margin-bottom:5px;">50 - 100</p></div><div style="display:inline-block; margin-left:20px;"><b class ="circle" style="background:#904b9b; width:22px; height:22px; border:none;"></b><p style="padding-left:20px; line-height:20px;">Local</p></div>
						<div style="width: 150px; display:inline-block;"><b class ="circle" style="width:10px; height:10px;"></b><p id="leg4" style="padding-left:32px; position:relative; margin-bottom:5px;">25 - 50</p></div><div style=" display:inline-block; margin-left:20px;"><b class ="circle" style="background:#8c8c8c; width:22px; height:22px; border:none;"></b><p style="padding-left:20px; line-height:20px;">Other</p></div>
						<div style="width: 150px; display:inline-block;"><b class ="circle" style="width:5px; height:5px;"></b><p id="leg5" style="padding-left:36px; position:relative; margin-bottom:5px;">Less than 20</p></div>
						<p id="description" style="font-weight:bold; padding:0; display:block; white-space:normal; width:280px;">Number of campsites at a particular campground</p>
						</br>
					</div>
					<div id="leg_2" style="display:none;">
						<h1 class="activity" style="margin-bottom:0; font-variant:normal;letter-spacing:0;">Skiing/Snowboarding</h1>
						<h2 id="title" style="margin-bottom:15px; margin-top:15px;">Annual Snowfall</h2><img src="img/skiing.png" id="image2" style="display:inline-block; right:20px; margin-top:60px;">
						<br/>
						<div style="height:32px;"><b id ="highest" style="background:#54278f; border-left:black 2px solid; border-right:black 2px solid; border-top:black 2px solid;"></b><p>&nbsp</p><p id="leg1">&nbsp100+</p></div>
						<div style="height:30px;"><b id ="midhigh" style="background:#756bb1; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg2">&nbsp50 - 100</p></div>
						<div style="height:30px;"><b id ="middle" style="background:#9e9ac8; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg3">&nbsp25 - 50</p></div>
						<div style="height:30px;"><b id ="midlow" style="background:#cbc9e2; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg4">&nbsp10 - 25</p></div>
						<div style="height:32px;"><b id ="lowest" style="background:#f2f0f7; border-left:black 2px solid; border-right:black 2px solid; border-bottom:black 2px solid;"></b><p>&nbsp</p><p id="leg5">&nbspLess than 10</p></div><br/>
						<p id="description" style="font-weight:bold; padding:0; display:block; white-space:normal; width:280px;">Mean annual snowfall in inches</p><br/>
						<br/><img src="img/ski_resort.png" style="height:30px; width:30px; bottom: 8px; position:relative;"><p style="padding:0; font-size:18px; bottom:17px; position:relative;">&nbspSki Resort</p>
						</br>
					</div>
					<div id="leg_4" style="display:none;">
						<h1 class="activity" style=" font-variant:normal;letter-spacing:0;">River Rafting</h1>
						<h2 id="title" style="margin-top:10px;">Rapid Class</h2><img src="img/raft.png" id="image2" style="display:inline-block; margin-top:10px; right:20px; width:80px; height:80px;"> 
						<br/>
						<img src='img/raft_icon2.png' style="width:28px; height:28px;"><p>&nbsp</p><p id="leg1" style="left:40px; position:absolute; margin-top:-1px;">Class IV-V</p><br/>
						<img src='img/raft_icon.png' style="width:20px; height:20px;"><p>&nbsp</p><p id="leg2" style="left:40px; position:absolute; margin-top:-1px;">Class I-III</p><br/>
						<b id ="highest" style="background:#3399ff; height:3px; vertical-align:middle; position:relative; margin-top:15px;"></b><p>&nbsp</p><p id="leg2" style="left:60px; position:absolute;margin-top:5px;">Raftable River Section</p><br/><br/>
						<p id="description" style="font-weight:bold; padding:0; display:block; white-space:normal; width:280px;">Rapid class based on the highest level rapid in each river. Only the sections of each river suitable for rafting are shown.</p>
						</br>
					</div>
					<div id="leg_3" style="display:none;">
						<h1 class="activity" style=" font-variant:normal; letter-spacing:0;">Mountaineering</h1>
						<h2 id="title" style="margin-top:5px;line-height:28px;margin-bottom:10px;">Elevation (Terrain, Mountain)</h2><!--<img src="img/climbing.png" id="image2" style="display:inline-block; right:15px; margin-top:70px; width:65px; height:65px;"> -->
						<br/>
						<div style="height:32px;"><b id ="lowest" style="background:rgba(37,37,37,0.7); position: relative; margin-bottom:5px;border-left:black 2px solid; border-right:black 2px solid; border-top:black 2px solid;"></b><p>&nbsp</p><p id="leg1" style="padding-left:45px;">12,000+</p><img src="img/mountain_icon1.png" style="padding-bottom:5px; width:27px; height:27px; padding-left:15px; overflow:hidden; display:inline-block;"></div>
						<div style="height:30px;"><b id ="lowest" style="background:rgba(99,99,99,0.7); position: relative; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg2" style="padding-left:45px;">9,000 - 12,000</p><img src="img/mountain_icon2.png" style="padding-bottom:4px; width:21px; height:21px; padding-left:15px;"></div>
						<div style="height:30px;"><b id ="lowest" style="background:rgba(150,150,150,0.7); position: relative; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg3" style="padding-left:45px;">6,000 - 9,000</p><img src="img/mountain_icon3.png" style="padding-bottom:6px; width:17px; height:17px; padding-left:15px;"></div>
						<div style="height:30px;"><b id ="lowest" style="background:rgba(204,204,204,0.7); position: relative; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg4" style="padding-left:45px;">3,000 - 6,000</p><img src="img/mountain_icon4.png" style="padding-bottom:7px; width:13px; height:13px; padding-left:15px;"></div>
						<div style="height:32px;"><b id ="lowest" style="background:rgba(247,247,247,0.7); position: relative; border-left:black 2px solid; border-right:black 2px solid; border-bottom:black 2px solid;"></b><p>&nbsp</p><p id="leg5" style="padding-left:45px;">Less than 3,000</p><img src="img/mountain_icon5.png" style="padding-bottom:8px; width:10px; height:10px; padding-left:15px;"></div><br/>
						<p id="description" style="font-weight:bold; padding:0; display:block; white-space:normal; width:280px;">Elevations are expressed in feet</p><br/>
						<div id="findbox" style="display:none;" data-step="3" data-intro="Use the bar to search for specific mountains."></div>	
					</div>
					<div id="facts_1" style="display:unset">
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts" style="line-height:20px;">&#9900 Approximately 40% of PNW residents participate in developed camping.<br/><br/>&#9900 Developed camping is more popular than primitive camping, and includes car-camping, RV camping, or camper cabins.</p3>
					</div>
					<div id="facts_2" style="display:none; ">
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts" style="line-height:20px;">&#9900 Timberline Resort on Mount Hood has the highest true-up vertical drop in the region, at 3,690 feet. <br/><br/>&#9900 The Summit at Snoqualmie is the most visited ski resort in the region.<br/><br/>&#9900 Resident Ski/Snowboard participation by state:</p3>
						<br/>
						<table id="skiTable" style="width:80%; margin-left:40px;">
							<tr>
								<th>State</th>
								<th>Ski</th> 
							<th>Snow-<br/>board</th>
							</tr>
							<tr>
								<td>ID</td>
								<td>6.4%</td> 
								<td>1.0%</td>
							</tr>
							<tr>
								<td>OR</td>
								<td>2.3%</td> 
								<td>2.8%</td>
							</tr>
							<tr>
								<td>WA</td>
								<td>3.4%</td> 
								<td>5.1%</td>
							</tr>
						</table>
					</div>
					<div id="facts_3" style="display:none">
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts" style="line-height:20px;">&#9900 Mount Rainier is the tallest mountain in the PNW, at 14,411 feet.<br/><br/>&#9900 Three major ranges are present in the PNW: the Pacific Coast Range, the Cascades, and the Northern Rocky Mountains</p3>
					</div>
					<div id="facts_4" style="display:none">
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts" style="line-height:20px;">&#9900 Approximately 12% of Pacific Northwest residents participate in some form of white-water activity (rafting, kayaking, canoeing).</p3>
					</div>
				</div>
				<div id="pageChange" data-step="4" data-intro="Use these buttons to view data sources, view other map pages, or share maps on social media.">
					<a href="#sources" id="arrow" style="display:inline-block;" title="Map Sources/Info">
						<i class="fa fa-info-circle" aria-hidden="true" style="padding-left:70px;"></i>
					</a>
					<a href="#link_popup" id="arrow" style="display:inline-block;" title="Other Maps">
						<i class="fa fa-home" aria-hidden="true" style="padding-left:7px;"></i>
					</a>
					<a href="#share" class="share" id="arrow" style="display:inline-block;" title="Share Map">
						<i class="fa fa-share-alt " aria-hidden="true" style="padding-left:7px;"></i>
					</a>
					<a class="share" id="arrow" style="display:inline-block;" href="javascript:void(0);" onclick="javascript:introJs().setOption('showBullets', false).setOption('showStepNumbers', false).setOption('tooltipClass', 'customDefault').start();" title="Map Demo">
						<i class="fa fa-question-circle " aria-hidden="true" style="padding-left:7px;"></i>
					</a>
				</div>
			</div>
		</div>
    	<div id="map" style="width: 100%; height: 100%;" data-step="5" data-intro="This is the main map display. Hover over map data to reveal more information.">
    		<button type="button" class='centerMap' onclick="centerMap()">Center PNW</button>
    	</div>
    	
    	<div id="sources" class="overlay">
			<div class="popup">
				<h2 style="display:inline; font-size:32px;">Sources</h2>
				<a class="close" href="#" style="display:inline;">Ã—</a>
				<hr>
				<div class="content">
					<p2 style="font-size:20px">Geographic Data</p2><br><br/>
                    <div class="source">
                    	<b><p2>Campgrounds: <a href = "http://www.uscampgrounds.info/" target="_blank">USCampgrounds</a></p2></b><br>
                    </div>
                    <div class="source">
                    	<b><p2>Idaho Ski Resorts: <a href = "https://www.google.com/maps/d/u/0/viewer?mid=1B9fdGsbVONzJFnqAIF-JYslyXgY&hl=en_US&ll=44.86332209654876%2C-113.97446376171877&z=7" target="_blank">Google MyMaps</a></p2></b><br>
                    		<p3>Crowdsourced data.</p3>
                    </div>
                    <div class="source">
                    	<b><p2>Oregon Ski Resorts: <a href = "https://www.google.com/maps/d/u/0/viewer?mid=1kglHouudKga-bJYC3Zgyul2yVZs&hl=en_US&ll=43.946186771129085%2C-119.90923214999998&z=7" target="_blank">Google MyMaps</a></p2></b><br>
                    		<p3>Crowdsourced data.</p3>
                    </div>
                    <div class="source">
                    	<b><p2>Washington Ski Resorts: <a href = "https://www.google.com/maps/d/u/0/viewer?mid=1q99S90kSKateNROg2Omn4kEedxE&hl=en_US&ll=46.9634435779086%2C-119.16908730078126&z=7" target="_blank">Google MyMaps</a></p2></b><br>
                    		<p3>Crowdsourced data.</p3>
                    </div>
					<div class="source">
                    	<b><p2>Annual Snowfall: <a href = "https://sites.ualberta.ca/~ahamann/data/climatewna.html" target="_blank">Andreas Hamann and ClimateWNA</a></p2></b><br>
                    	<p3>Snowfall data included in 24 Bioclimate Variables dataset. 1961-1990 climate normal.</p3>
                    </div>
                    <div class="source">
                    	<b><p2>Idaho Whitewater Rafting Rivers: <a href = "http://www.gonorthwest.com/Idaho/Activities/rafting/rafting.htm" target="_blank">Go Northwest!</a></p2></b><br>
                    </div>
                    <div class="source">
                    	<b><p2>Oregon Whitewater Rafting Rivers: <a href = "http://www.gonorthwest.com/Oregon/Activities/rafting/rafting.htm" target="_blank">Go Northwest!</a></p2></b><br>
                    </div>
                    <div class="source">
                    	<b><p2>Washington Whitewater Rafting Rivers: <a href = "http://www.gonorthwest.com/Washington/Activities/rafting/sauk.htm" target="_blank">Go Northwest!</a></p2></b><br>
                    </div>
                    <div class="source">
                    	<b><p2>Additional Rafting Data for Class and Rapid Location: <a href = "https://www.americanwhitewater.org/" target="_blank">American Whitewater</a></p2></b><br>
                    </div>
                    <div class="source">
                    	<b><p2>Mountain Elevations: <a href = "http://www.summitpost.org/" target="_blank">Summit Post</a></p2></b><br>
                    </div>
                    <div class="source">
                    	<b><p2>Background Elevation: <a href = "https://earthexplorer.usgs.gov/" target="_blank">United States Geological Survey EarthExplorer</a></p2></b><br>
                    </div>
                    <p2 style="font-size:20px">Basemap</p2><br><br/>
                    	<div class="source">
                    		<b><p2>Background Terrain: <a href = "https://leaflet-extras.github.io/leaflet-providers/preview/index.html#filter=Esri.WorldTerrain" target="_blank">ESRI</a></p2></b><br>
                    			<p3>ESRI Background Terrain; Source: USGS, Esri, TANA, DeLorme, and NPS<p3>
                    			<p3>More information can be found <a href = "https://developers.arcgis.com/" target="_blank">here.</a><p3>
                    	</div>
                    	<div class="source">
                    		<b><p2>Background Labels: <a href = "https://leaflet-extras.github.io/leaflet-providers/preview/#filter=CartoDB.PositronOnlyLabels" target="_blank">Carto</a></p2></b><br>
                    			&copy;<a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy;<a href="http://cartodb.com/attributions">CartoDB</a>
                    	</div>	
				</div>
				<hr>
				<p2 id="map_creation" style="float:right; font-size:16px;">Map created with <a href = "https://leafletjs.com/" target="_blank">Leaflet</a>, <a href = "https://d3js.org/topojson.v1.min.js" target="_blank">D3 TopoJson</a>, <a href = "http://geoserver.org/" target="_blank">Geoserver</a>, and <a href = "https://qgis.org/en/site/" target="_blank">QGIS</a></p2>
				<br/>
				<a class="close2" href="#" style="display:inline;">Close</a>
			</div>
		</div>
		
		<div id="link_popup" class="link_overlay">
			<div class="link_popup">
				<a class="close" href="#" style="display:inline;">Ã—</a>
				<div class="content">
					<a href="recreation_home.html" style="font-weight:bold; text-decoration:none;">Chapter Home</a>
					<hr>
					<a href="parks.html" style="text-decoration:underline;">Protected Lands</a>
					<a href="activities.html" style="text-decoration:underline;">Outdoor Activities</a>
					<a href="economic.html" style="text-decoration:underline;">Outdoor Economy</a>
					<a href="hunting.html" style="text-decoration:underline;">Hunting</a>
					<hr>
					<a href="../index.html" style="font-weight:bold; text-decoration:none;">Atlas Home</a>
				</div>
			</div>
		</div>
    	
    	<div id="share" class="share_overlay">
			<div class="share_popup">
				<a id="clear" href="#" style="display:none;">Ã—</a>
				<div class="content">
					<a href="https://facebook.com/sharer.php?u=http://pnwatlas.oregonstate.edu/recreation/activities.html" id="arrow" style="display:inline-block;">
						<i class="fa fa-facebook-square " aria-hidden="true" style="padding-left:0;"></i>
					</a>
					<a href="https://twitter.com/home?status=PNW%20Outdoor Activities%0Ahttp%3A//pnwatlas.oregonstate.edu/recreation/activities.html" id="arrow" style="display:inline-block;">
						<i class="fa fa-twitter-square " aria-hidden="true" style="padding-left:0;"></i>
					</a>
				</div>
			</div>
		</div>
<script src="assets/hiking.js"></script>
<script src="assets/mountains.js"></script>
<script>
//////////////base functions (these never change)///////////////////////
	//////////////function for the info panel collapse button///////////////////////
	var collapsed = false;
    function collapse(){
    	if (collapsed == false){
    		document.getElementById("infoPanel").style.transition = "display 2s";
    		document.getElementById("infoPanel").style.display = "none";
    		document.getElementById("collapse").style.left = '0px';
    		document.getElementById("collapse").style.paddingLeft = '2px';
    		document.getElementById("collapse-arrow").className = "fa fa-chevron-right";
    		collapsed = true;
    	} else{
    		document.getElementById("infoPanel").style.display = "unset";
    		document.getElementById("collapse").style.left = '320px';
    		document.getElementById("collapse").style.paddingLeft = '0px';
    		document.getElementById("collapse-arrow").className = "fa fa-chevron-left";
    		collapsed = false;
    	}
    	
    }
    
    L.TopoJSON = L.GeoJSON.extend({  
  		addData: function(jsonData) {    
    		if (jsonData.type === 'Topology') {
      			for (key in jsonData.objects) {
       			 geojson = topojson.feature(jsonData, jsonData.objects[key]);
       			 L.GeoJSON.prototype.addData.call(this, geojson);
      		}
    	}    
    	else {
      		L.GeoJSON.prototype.addData.call(this, jsonData);
    		}
  		}  
	});
	
	function centerMap(){
		var width = document.documentElement.clientWidth;
		
		if (width < 1500 && width > 800) {
        	map.setView(new L.LatLng(45.60, -121.75), 6); 
    		}  else if (width > 1501) {
        	map.setView(new L.LatLng(45.60, -119.75), 7); 
        	} else {
        	map.setZoom(5);
        	}
	}
//////////////Initialize map///////////////////////
	var map = L.map('map', {center: [45.60, -121.75], zoom: 6, zoomControl:false});
///////////////////////make zoom level correspond to browser size////////////////////////////////
	window.addEventListener('load', function(event){
    	var width = document.documentElement.clientWidth;
    	
    	if (width < 1500 && width > 800) {
        	map.setView(new L.LatLng(45.60, -121.75), 6); 
    		}  else if (width > 1501) {
        	map.setView(new L.LatLng(45.60, -119.75), 7); 
        	} else {
        	map.setZoom(5);
        	}
	});
	
	map.setMaxBounds(map.getBounds());
////////////////////////////////basemap layers////////////////////////////////
	var Esri_WorldTerrain = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}', {
		attribution: 'Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS',
		maxZoom:10,
		minZoom:4
	}).addTo(map);
	
	
	var pnwCover = L.tileLayer.wms('https://geoserver.library.oregonstate.edu/geoserver/PNW_ATLAS/wms', {
		layers: 'PNW_ATLAS:pnw_outline2',
        format: 'image/png',
		maxZoom:10,
		minZoom:5,
		opacity:0.3,
		transparent:true,
	}).addTo(map);
	
	var label = L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_only_labels/{z}/{x}/{y}@2x.png', {
		attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
		subdomains: 'abcd',
		maxZoom:10,
		minZoom:5,
		tileSize:256,
		bounds:[
			new L.LatLng(49.56,-125.25),
			new L.LatLng(40.5,-111.5)
		],
		pane:'labels'
	});	
	var backgroundParks = L.tileLayer.wms('https://geoserver.library.oregonstate.edu/geoserver/PNW_ATLAS/wms', {
		layers: 'PNW_ATLAS:parks_total',
        format: 'image/png',
		maxZoom:10,
		minZoom:4,
		transparent:true
	}).addTo(map);
	
	var pnwBorders = L.tileLayer.wms('https://geoserver.library.oregonstate.edu/geoserver/PNW_ATLAS/wms', {
		layers: 'PNW_ATLAS:pnw_borders_black',
        format: 'image/png',
		maxZoom:10,
		minZoom:5,
		opacity:0.4,
		transparent:true,
		pane:'borders'
	});
	
	function borders() {
    	if ($('#borderbox').is(':checked')){
    		pnwBorders.addTo(map);
    	}
    	else {
    		map.removeLayer(pnwBorders);
    	}
    }
	
	var rivers = new L.TopoJSON(null, {
  			interactive:false
		});

	$.getJSON('assets/rivers.json')
  		.done(riversaddTopoData);

	function riversaddTopoData(topoData) {  
  		rivers.addData(topoData);
  		rivers.addTo(map);
  		rivers.eachLayer(riversHandleLayer);
	}

	function riversHandleLayer(layer){
        layer.setStyle({
            opacity: 0.4,
			color:'#80bfff',
			weight: riverSize(layer.feature.properties.length_1)
        });
    }
    
    function riverSize(e){
        return e > 400000 ? 2.5 :
        	   e > 200000 ? 2 :
        	   e > 300000 ? 1.5 :
        	   e > 50000 ? 1 :
        		0.5;
    	}
	
	map.createPane('labels');
	map.getPane('labels').style.pointerEvents = 'none';
	map.getPane('labels').style.zIndex = 650;
	label.addTo(map);
	
		
	map.createPane('tooltip');
	map.getPane('tooltip').style.zIndex = 700;
	
	map.createPane('borders');
	map.getPane('borders').style.pointerEvents = 'none';
	map.getPane('borders').style.zIndex = 450;
	
	pnwBorders.addTo(map);
///////////////////////additional tile layers////////////////////////////////
	
///////////////////////important variables////////////////////////////////
	var data = 1;
	var boxHeight = 70;
//////////////function for the info panel collapse button///////////////////////	
	var info = L.control();

	info.onAdd = function (map) {
    	this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
    	this.update();
    	return this._div;
	};
	
	function nullFinder(props){
		if (props == null){return 'N/A';}
		else {return props;}
	}
	
	info.update = function (props) {
   		this._div.innerHTML = ('<b style="font-size:24px;">Hover over Map</b>');
	};
	
	info.addTo(map);
////////////////////////////////basemap layers////////////////////////////////

	//elevation raster	
	 var elevation = L.tileLayer.wms('https://geoserver.library.oregonstate.edu/geoserver/PNW_ATLAS/wms', {
		layers: 'PNW_ATLAS:pnw_DEM_feet',
        format: 'image/png',
		maxZoom:10,
		minZoom:4,
		opacity:0.7,
		transparent:true
	});
	//average annual snowfall raster	
    var snowfall = L.tileLayer.wms('https://geoserver.library.oregonstate.edu/geoserver/PNW_ATLAS/wms', {
		layers: 'PNW_ATLAS:pnw_snowfall',
        format: 'image/png',
		maxZoom:10,
		minZoom:4,
		opacity:0.7,
		transparent:true
	});
	///////////////////////whitewater rafting ////////////////////////////////////  
	//icons displayed over rivers
    var raftIcon1 = L.icon({iconSize: [20,20], iconUrl: 'img/raft_icon.png'});
    var raftIcon2 = L.icon({iconSize: [28,28], iconUrl: 'img/raft_icon2.png'});
    //raft icons on hover
    var raftIconHover1 = L.icon({iconSize: [33,33], iconUrl: 'img/raft_icon_hover.png'});
    var raftIconHover2 = L.icon({iconSize: [25,25], iconUrl: 'img/raft_icon_hover2.png'});
    //determine which raft icon to display
    function raftIcon(string) {
    	return string == 'IV' || string == 'V' ? raftIcon2:
    		raftIcon1;
    }
    function raftIconHover(string) {
    	return string == 'IV' || string == 'V' ? raftIconHover1:
    		raftIconHover2;
    }
   //raft icon points
    //var	raftPoints = $.getJSON("assets/rafting_river_points.geojson", function(data){
      var raftPoints = L.geoJson(null, {
        	pointToLayer: function (feature, latlng) {
    			return L.marker(latlng, {icon:raftIcon(feature.properties.CLASS)}
    				).bindTooltip('<h2 style="margin:0;">River Name</h2><p style="display:inline; font-size:18px;">' + feature.properties.UID + '</p>', {className: 'label_tooltip', pane:'tooltip',direction:'right',offset:L.point({x: 15, y: 0})});
    			},
    		onEachFeature: function(feature,layer)
            {
            	layer.on("mouseover",function(e){
                	info.update(layer.feature.properties);
                	layer.setIcon(raftIconHover(feature.properties.CLASS))
            	});
            	layer.on("mouseout",function(e){
                	info.update();
                	layer.setIcon(raftIcon(feature.properties.CLASS))
            	});
            }
        });
     
     $.getJSON("assets/rafting_river_points.geojson", function(data) {
        raftPoints.addData(data);
    });
    
    //raftable river sections
    var riverRafting = L.geoJson(null, {
        	style:function raftingStyle(feature){
				return{
					opacity: 1,
					color: '#3399ff',
					weight:2
				};
			}
        });
   
    $.getJSON("assets/rafting_rivers.geojson", function(data) {
        riverRafting.addData(data);
    });
	///////////////////////camping////////////////////////////////////  
	//point color, based on ownership
	function campColor(string) {
		return string == 'federal' ? '#0066cc':
			string == 'state' ? '#377e35':
			string == 'local' ? '#904b9b':
				'#8c8c8c';	
	}
	//point size, based on total camp sites at a location
	function campSize(density) {
		return density > 200 ? 11:
			density > 100 ? 9:
			density > 50 ? 7:
			density > 25 ? 5:
				3;
	}
	//camp site layer
    var	campsites = L.geoJson(null, {
        	pointToLayer: function (feature, latlng) {
    			return L.circleMarker(latlng, {
    				color: '#ffffff',
    				fillColor: campColor(feature.properties.owner),
    				radius: campSize(feature.properties.sites),
    				opacity: 1,
    				fillOpacity: 0.7,
    				weight: 0.5
    			}).bindTooltip('<h2 style="margin:0;">' + feature.properties.name + '</h2><p style="display:inline; font-size:18px;">' + nullFinder(feature.properties.sites) + '&nbspCampsites</p>', {className: 'label_tooltip' , pane:'tooltip'});
    			},
    		onEachFeature: function (feature, layer){
    			layer.on("mouseover",function(e){
    				layer.setStyle({
    						fillOpacity:1
    					});
                	info.update(layer.feature.properties);
            		});
            	layer.on("mouseout",function(e){
            		layer.setStyle({
    						fillOpacity:0.7
    					});
                	info.update();
            		});
    			}
        	}).addTo(map);
        	
    $.getJSON("assets/camp_sites.geojson", function(data) {
        campsites.addData(data);
    });
    //camping function. activated on button selection	    
 
	///////////////////////skiing////////////////////////////////////   
	//ski resort icon
   var skiIcon1 = L.icon({iconSize: [25,25], iconUrl: 'img/ski_resort.png'});
    //ski resort icon on hover
   var skiIcon2 = L.icon({iconSize: [32,32], iconUrl: 'img/ski_resort_shadow.png'});
   //ski resort layer
    skiResorts = L.geoJson(null, {
        	pointToLayer: function (feature, latlng) {
    			return L.marker(latlng, {icon:skiIcon1}
    				).bindTooltip('<h2 style="margin:0;">' + feature.properties.Name + '</h2>', {className: 'label_tooltip', pane:'tooltip',direction:'right',offset:L.point({x: 15, y: 0})})
    			},
    		onEachFeature: function(feature,layer)
            {
            	layer.on("mouseover",function(e){
                	info.update(layer.feature.properties);
                	layer.setIcon(skiIcon2)
            	});
            	layer.on("mouseout",function(e){
                	info.update();
                	layer.setIcon(skiIcon1)
            	});
            }
        });
	
	$.getJSON("assets/ski_resorts.geojson", function(data) {
        skiResorts.addData(data);
    });
 //skiing function. activated on button selection

	///////////////////////mountaineering////////////////////////////////////     
	//mountain icons  	
    
    var mountainIcon1 = L.icon({iconSize: [23,23], iconUrl: 'img/mountain_icon1.png'});
    var mountainIcon2 = L.icon({iconSize: [19,19], iconUrl: 'img/mountain_icon2.png'});
   	var mountainIcon3 = L.icon({iconSize: [14,14], iconUrl: 'img/mountain_icon3.png'});
    var mountainIcon4 = L.icon({iconSize: [11,11], iconUrl: 'img/mountain_icon4.png'});
    var mountainIcon5 = L.icon({iconSize: [7,7], iconUrl: 'img/mountain_icon5.png'});
    
    //determine initial icon size based on zoom level
    function updateIcon(){
    		var currentZoom = map.getZoom();
    		if (currentZoom >= 7){
    	 		mountainIcon1 = L.icon({iconSize: [23,23], iconUrl: 'img/mountain_icon1.png'});
    			mountainIcon2 = L.icon({iconSize: [19,19], iconUrl: 'img/mountain_icon2.png'});
   		 		mountainIcon3 = L.icon({iconSize: [14,14], iconUrl: 'img/mountain_icon3.png'});
    			mountainIcon4 = L.icon({iconSize: [11,11], iconUrl: 'img/mountain_icon4.png'});
    			mountainIcon5 = L.icon({iconSize: [7,7], iconUrl: 'img/mountain_icon5.png'});
    			updateMountains();
    	 	}
    	 	else if (currentZoom == 6){
    	 		mountainIcon1 = L.icon({iconSize: [17,17], iconUrl: 'img/mountain_icon1.png'});
    			mountainIcon2 = L.icon({iconSize: [13,13], iconUrl: 'img/mountain_icon2.png'});
   		 		mountainIcon3 = L.icon({iconSize: [10,10], iconUrl: 'img/mountain_icon3.png'});
    			mountainIcon4 = L.icon({iconSize: [6,6], iconUrl: 'img/mountain_icon4.png'});
    			mountainIcon5 = L.icon({iconSize: [3,3], iconUrl: 'img/mountain_icon5.png'});
    			updateMountains();
    	 	}
    	 	else {
    	 		mountainIcon1 = L.icon({iconSize: [12,12], iconUrl: 'img/mountain_icon1.png'});
    			mountainIcon2 = L.icon({iconSize: [9,9], iconUrl: 'img/mountain_icon2.png'});
   		 		mountainIcon3 = L.icon({iconSize: [7,7], iconUrl: 'img/mountain_icon3.png'});
    			mountainIcon4 = L.icon({iconSize: [5,5], iconUrl: 'img/mountain_icon4.png'});
    			mountainIcon5 = L.icon({iconSize: [3,3], iconUrl: 'img/mountain_icon5.png'});
    			updateMountains();
    		}
    }
    //change icon size based on zoom level
    map.on('zoomend', function() {
    	 var currentZoom = map.getZoom();
    	 if (data === 3){
    	 	map.removeLayer(mountains);
    		if (currentZoom >= 7){
    	 		mountainIcon1 = L.icon({iconSize: [23,23], iconUrl: 'img/mountain_icon1.png'});
    			mountainIcon2 = L.icon({iconSize: [19,19], iconUrl: 'img/mountain_icon2.png'});
   		 		mountainIcon3 = L.icon({iconSize: [14,14], iconUrl: 'img/mountain_icon3.png'});
    			mountainIcon4 = L.icon({iconSize: [11,11], iconUrl: 'img/mountain_icon4.png'});
    			mountainIcon5 = L.icon({iconSize: [7,7], iconUrl: 'img/mountain_icon5.png'});
    			updateMountains();
    	 	}
    	 	else if (currentZoom == 6){
    	 		mountainIcon1 = L.icon({iconSize: [17,17], iconUrl: 'img/mountain_icon1.png'});
    			mountainIcon2 = L.icon({iconSize: [13,13], iconUrl: 'img/mountain_icon2.png'});
   		 		mountainIcon3 = L.icon({iconSize: [10,10], iconUrl: 'img/mountain_icon3.png'});
    			mountainIcon4 = L.icon({iconSize: [6,6], iconUrl: 'img/mountain_icon4.png'});
    			mountainIcon5 = L.icon({iconSize: [3,3], iconUrl: 'img/mountain_icon5.png'});
    			updateMountains();
    	 	}
    	 	else {
    	 		mountainIcon1 = L.icon({iconSize: [12,12], iconUrl: 'img/mountain_icon1.png'});
    			mountainIcon2 = L.icon({iconSize: [9,9], iconUrl: 'img/mountain_icon2.png'});
   		 		mountainIcon3 = L.icon({iconSize: [7,7], iconUrl: 'img/mountain_icon3.png'});
    			mountainIcon4 = L.icon({iconSize: [5,5], iconUrl: 'img/mountain_icon4.png'});
    			mountainIcon5 = L.icon({iconSize: [3,3], iconUrl: 'img/mountain_icon5.png'});
    			updateMountains();
    		}
    	 }
    	 else{
    	 
    	 }
    })
    //mountain icon on hover
    var mountainIconHover = L.icon({iconSize: [16,16], iconUrl: 'img/mountain_icon_hover.png'});
    
    //determine icon based on mountain elevation
    function iconSelection(density) {
    	return density > 12000 ? mountainIcon1:
    		density > 9000 ? mountainIcon2:
    		density > 6000 ? mountainIcon3:
    		density > 3000 ? mountainIcon4:
    			mountainIcon5;
    }
    //mountain point function for changes in zoom level
	function updateMountains(){
    	mountains = L.geoJson(mountainPoints, {
    		pointToLayer: function (feature, latlng) {
    					return L.marker(latlng, {
    					icon: iconSelection(feature.properties.elev_ft)}).bindTooltip('<h2 style="margin:0;">' + feature.properties.name + '</h2><p style="display:inline; font-size:18px;">' + feature.properties.elev_ft + '&nbspft.</p>', {className: 'label_tooltip', pane:'tooltip',direction:'right',offset:L.point({x: 5, y: 0})});		
    				},
    		onEachFeature: function(feature, layer) {
    				layer.on("mouseover",function(e){
                		info.update(layer.feature.properties);
                		layer.setIcon(mountainIconHover)
            		});
            		layer.on("mouseout",function(e){
                		info.update();
                		layer.setIcon(iconSelection(feature.properties.elev_ft))
            		});
   				  }
    		  });
    	mountains.addTo(map);
    }
   //mountain function
   var mountains = L.geoJson(mountainPoints, {
    		pointToLayer: function (feature, latlng) {
    					return L.marker(latlng, {
    					icon: iconSelection(feature.properties.elev_ft)}).bindTooltip('<h2 style="margin:0;">' + feature.properties.name + '</h2><p style="display:inline; font-size:18px;">' + feature.properties.elev_ft + '&nbspft.</p>', {className: 'label_tooltip', pane:'tooltip',direction:'right',offset:L.point({x: 5, y: 0})});		
    				},
    		onEachFeature: function(feature, layer) {
    				layer.on("mouseover",function(e){
                		info.update(layer.feature.properties);
                		layer.setIcon(mountainIconHover)
            		});
            		layer.on("mouseout",function(e){
                		info.update();
                		layer.setIcon(iconSelection(feature.properties.elev_ft))
            		});
   				  }
    		  });
    //add search control for mountains
	var searchControl =  new L.Control.Search({
		container: 'findbox',
		layer: mountains,
		propertyName: 'name',
		textPlaceholder: 'Search for a mountain...',
		collapsed:false,
		marker:false,
		moveToLocation: function(latlng, Unit_Nm, map) {
			//map.fitBounds( latlng.layer.getBounds() );
			var zoom = 10;
  			map.setView(latlng, zoom); // access the zoom
		}
	});
	
    //show popup when search is completed
    searchControl.on('search:locationfound', function(e) {		
		if(e.layer._popup){
			e.layer.openPopup();
			}
	}).on('search:collapsed', function(e) {
		e.layer.setStyle({fillOpacity:0.7});
	});

	//mountaineering function
      
///////////////////////////////button function////////////////////////////////	
	var buttonLabels = ['#but1','#but2','#but3','#but4'];

	var buttonFunctions = {
		but1: {button:'but1', newLayers:[campsites, backgroundParks, rivers], newLegend: 'leg_1', newElements:['facts_1'], title:'Camping', variable:1, layerFunction:function(){boxHeight = 70; resizeMiddle();info.update();map.removeControl(searchControl);}},
		but2: {button:'but2', newLayers:[snowfall, skiResorts], newLegend: 'leg_2', newElements:['facts_2'], title:'Skiing',  variable:2, layerFunction:function(){boxHeight = 72; resizeMiddle();info.update();map.removeControl(searchControl);}},
		but3: {button:'but3', newLayers:[mountains, elevation], newLegend: 'leg_3', newElements:['facts_3','findbox'], title:'Mountaineering',  variable:3, layerFunction:function(){boxHeight = 80; resizeMiddle();info.update();	map.addControl(searchControl);}},
		but4: {button:'but4', newLayers:[riverRafting, raftPoints, backgroundParks, rivers], newLegend: 'leg_4', newElements:['facts_4'], title:'Rafting',  variable:4, layerFunction:function(){boxHeight = 75; resizeMiddle();info.update();map.removeControl(searchControl);}}
	};
	
	$('.main1').clickFunction({
		buttonFunctions: buttonFunctions,
		buttonLabels: buttonLabels,
		selected:buttonFunctions.but1
	});
 ///////////////////////////////other miscellaneous functions (these also never change)////////////////////////////////   
  
	//add scrolling capabilities to text box
     var container = document.getElementById('text');
		Ps.initialize(container);
	    
    new L.Control.Zoom({ position: 'bottomright' }).addTo(map);
	document.getElementsByClassName("leaflet-control-attribution")[0].style.visibility = "hidden";
	
	var minHeight = 30; // Define a minimum height for the middle div

	function resizeMiddle() {
    var h = $('body').height() - $('#top').height() - boxHeight - 30;
    		h = h > minHeight ? h : minHeight;
   	 	$('#attribution').height(h);
	}
	
	function resizePopup() {
   		var h = $('.popup').height() - 90;
    		h = h > minHeight ? h : minHeight;
   	 	$('.popup .content').height(h);
	}
	$(document).ready(resizePopup);
	$(window).resize(resizePopup);

	$(document).ready(resizeMiddle);
	$(window).resize(resizeMiddle);
	
	$(document).click(function(event) {
		if (!$(event.target).closest(".share_overlay,.share,#sources,#link_popup").length) {
			$('#clear')[0].click();
		}
	});

    //remove standard leaflet attribution
    

</script>
</body>
</html>
