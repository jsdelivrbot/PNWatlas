<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
     <title>Water Use</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" /> 
    <link rel="stylesheet" href="css/water_maps_style.css" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Maven+Pro" rel="stylesheet">
    <link rel="stylesheet" href="css/perfect-scrollbar.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <link rel="shortcut icon" href="img/pnw.ico" type="image/x-icon">
    
    <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="js/perfect-scrollbar.js"></script>
    <script type="text/javascript" src="../js/clickFunction.js"></script>
    
   
</head>
<body>
		<button id="collapse" onclick="collapse()">
			<i class="fa fa-chevron-left" id ="collapse-arrow" aria-hidden="true"></i>
		</button>
		<div id="infoPanel">
			<div id="top">
				<h1>Water Use</h1>
				<img src="img/water_use_icon.png" id="titleImageCircle" style="display:inline-block;">
				<div id="buttons">
					<div class="dropdownSmall">
						<button class="dropbtnSmall"><b id="dataType">Select Use</b><p id="arrow" style="font-size:16px;">&#9660;</p></button>
							<div class="dropdown-contentSmall">
								<button type="button" id="but1" style="float:left; background:rgba(242, 242, 242, 0.67);" class="selectionSmall">Total</button>
								<button type="button" id="but2" class="selectionSmall" style="float:left;">Public</button>
								<button type="button" id="but3" style="float:left;" class="selectionSmall">Domestic</button>
								<button type="button" id="but4" class="selectionSmall" style="float:left;">Industrial</button>
								<button type="button" id="but5" style="float:left;" class="selectionSmall">Thermoelectric</button>
								<button type="button" id="but6" style="float:left;" class="selectionSmall">Mining</button>
								<button type="button" id="but7" style="float:left;" class="selectionSmall">Livestock</button>
								<button type="button" id="but8" style="float:left;" class="selectionSmall">Irrigation</button>
								<button type="button" id="but9" style="float:left;" class="selectionSmall">Aquaculture</button>
							</div>
					</div>
					<div class="dropdownSmall">
						<button class="dropbtnSmall"><b id="water">Select Water</b><p id="arrow" style="font-size:16px;">&#9660;</p></button>
							<div class="dropdown-contentSmall">
								<button type="button" id="waterBut1" class="selectionSmall" style="background:rgba(242, 242, 242, 0.8);">Total Water</button>
								<button type="button" id="waterBut2" class="selectionSmall">Surface Water</button>
								<button type="button" id="waterBut3" class="selectionSmall">Groundwater</button>
							</div>
					</div>
				</div>
			</div>
			<div id="attribution">		
				<div id="text">	
					<h2 id="title" style="display:inline-block; width:280px; white-space:normal;">Total Water Use (Mgal/day)</h2><img src="img/total.png" id="image2" style="display:inline-block; right:20px; margin-top:90px;">
					<br>
					<div style="height:32px;"><b id ="leg5_block" style="background:#045a8d; border-left:black 2px solid; border-right:black 2px solid; border-top:black 2px solid;"></b><p id="leg1_value" style="margin-left:5px;">1000+</p></div>
					<div style="height:30px;"><b id ="leg4_block" style="background:#2b8cbe; border-left:black 2px solid; border-right:black 2px solid;"></b><p id="leg2_value" style="margin-left:5px;">500 - 1000</p></div>
					<div style="height:30px;"><b id ="leg3_block" style="background:#74a9cf; border-left:black 2px solid; border-right:black 2px solid;"></b><p id="leg3_value" style="margin-left:5px;">250 - 500</p></div>
					<div style="height:30px;"><b id ="leg2_block" style="background:#bdc9e1; border-left:black 2px solid; border-right:black 2px solid;"></b><p id="leg4_value" style="margin-left:5px;">100 - 250</p></div>
					<div style="height:30px;"><b id ="leg1_block" style="background:#f1eef6; border-left:black 2px solid; border-right:black 2px solid;"></b><p id="leg5_value" style="margin-left:5px;">Less than 100</p></div>
					<div style="height:32px;"><b style="background:#ffffff; border-left:black 2px solid; border-right:black 2px solid; border-bottom:black 2px solid;"></b><p>&nbsp</p><p id="no_data">&nbsp0 or No Data</p></div><br/>
					<p id="description" style="font-weight:bold; padding:0; display:inline-block; white-space:normal; width:280px; position:relative;">Water use in millions of gallons of water per day.</p>
					<div id="facts_1" style="display:unset;">
						<br/>
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts">&#9900 Total water use in Pacific Northwest is 28,920 Mgal/day (2010 data). 20,939 Mgal/day for surface water, and 7,982 Mgal/day for groundwater.<br/><br/>&#9900 Idaho uses more water than Oregon and Washington Combined.<br/><br/>&#9900 Irrigation comprises 77.6% of total water use.</p3>
					</div>
					<div id="facts_2" style="display:none;">
						<br/>
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts">&#9900 Total public water use in Pacific Northwest is 1,682 Mgal/day (2010 data). 886 Mgal/day for surface water, and 796 Mgal/day for groundwater.<br/><br/>&#9900 Of the three PNW states, Washington has the highest daily public water use.</p3>
					</div>
					<div id="facts_3" style="display:none;">
						<br/>
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts">&#9900 Total domestic water use in Pacific Northwest is 259 Mgal/day (2010 data). 7 Mgal/day for surface water, and 252 Mgal/day for groundwater.<br/><br/>&#9900 Of the three PNW states, Washington has the highest daily domestic water use.</p3>
					</div>
					<div id="facts_4" style="display:none;">
						<br/>
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts">&#9900 Total industrial water use in Pacific Northwest is 666 Mgal/day (2010 data). 532 Mgal/day for surface water, and 135 Mgal/day for groundwater.<br/><br/>&#9900 Of the three PNW states, Washington has the highest daily industrial water use.</p3>
					</div>
					<div id="facts_5" style="display:none;">
						<br/>
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts">&#9900 Total thermoelectric water use in Pacific Northwest is 51 Mgal/day (2010 data). 47 Mgal/day for surface water, and 4 Mgal/day for groundwater.<br/><br/>&#9900 Of the three PNW states, Washington has the highest daily thermoelectric water use.</p3>
					</div>
					<div id="facts_6" style="display:none;">
						<br/>
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts">&#9900 Total mining water use in Pacific Northwest is 46 Mgal/day (2010 data). 24 Mgal/day for surface water, and 22 Mgal/day for groundwater.<br/><br/>&#9900 Of the three PNW states, Idaho has the highest daily mining water use.</p3>
					</div>
					<div id="facts_7" style="display:none;">
						<br/>
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts">&#9900 Total livestock water use in Pacific Northwest is 92 Mgal/day (2010 data). 32 Mgal/day for surface water, and 60 Mgal/day for groundwater.<br/><br/>&#9900 Of the three PNW states, Idaho has the highest daily livestock water use.</p3>
					</div>
					<div id="facts_8" style="display:none;">
						<br/>
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts">&#9900 Total irrigation water use in Pacific Northwest is 22,444 Mgal/day (2010 data). 15,917 Mgal/day for surface water, and 6,527 Mgal/day for groundwater.<br/><br/>&#9900 Of the three PNW states, Idaho has the highest daily irrigation water use.</p3>
					</div>
					<div id="facts_9" style="display:none;">
						<br/>
						<p3 style="font-weight:bold; line-height:36px;">Quick Facts:</p3><br/>
						<p3 id="facts">&#9900 Total aquaculture water use in Pacific Northwest is 3,679 Mgal/day (2010 data). 3,494 Mgal/day for surface water, and 185 Mgal/day for groundwater.<br/><br/>&#9900 Of the three PNW states, Idaho has the highest daily aquaculture water use.</p3>
					</div>
				</div>
				<div id="pageChange">
					<a href="groundwater_index.html" id="arrow" style="display:inline-block;">
						<i class="fa fa-arrow-left" aria-hidden="true" style=""></i>
					</a>
					<a href="#popup1" id="arrow" style="display:inline-block;">
						<i class="fa fa-info-circle" aria-hidden="true" style="margin-left:83px;"></i>
					</a>
					<a href="water_resources_index.html" id="arrow" style="display:inline-block;">
						<i class="fa fa-home" aria-hidden="true"></i>
					</a>
					<a href="pollution_index.html" id="arrow" style="display:inline-block;">
						<i class="fa fa-arrow-right" aria-hidden="true" style="margin-left:82px;"></i>
					</a>
				</div>
			</div>
		</div>
    	<div id="map" style="width: 100%; height: 100%;"></div>
    	
    	<div id="popup1" class="overlay">
			<div class="popup">
				<h2 style="display:inline; font-size:32px;">Sources</h2>
				<a class="close" href="#" style="display:inline;">Ã—</a>
				<hr>
				<div class="content">
					<p2 style="font-size:20px">Geographic Data</p2><br><br/>
                    <div class="source">
                    	<b><p2>Idaho Water Use: <a href = "https://waterdata.usgs.gov/id/nwis/water_use?format=html_table&rdb_compression=file&wu_area=County&wu_year=2010&wu_county=ALL&wu_category=ALL&wu_county_nms=--ALL%2BCounties--&wu_category_nms=--ALL%2BCategories--" target="_blank">USGS National Water Information System</a></p2></b><br>
                    		<p3>Notes: Data from 2010.</p3>
                    </div>
                    <div class="source">
                    	<b><p2>Oregon Water Use: <a href = "https://waterdata.usgs.gov/or/nwis/water_use?format=html_table&rdb_compression=file&wu_area=County&wu_year=2010&wu_county=ALL&wu_category=ALL&wu_county_nms=--ALL%2BCounties--&wu_category_nms=--ALL%2BCategories--" target="_blank">USGS National Water Information System</a></p2></b><br>
                    		<p3>Notes: Data from 2010.</p3>
                    </div>
                    <div class="source">
                    	<b><p2>Washington Water Use: <a href = "https://waterdata.usgs.gov/wa/nwis/water_use?wu_year=2010&wu_area=County&wu_county=ALL&wu_category=ALL&submitted_form=introduction&wu_county_nms=--ALL+Counties--&wu_category_nms=--ALL+Categories--" target="_blank">USGS National Water Information System</a></p2></b><br>
                    		<p3>Notes: Data from 2010.</p3>
                    </div>
				</div>
				<hr>
				<p2 style="float:right; font-size:12px;">Map created with Leaflet.</p2>
				<br/>
				<a class="close2" href="#" style="display:inline;">Close</a>
			</div>
		</div>
<script>
//////////////base functions (these never change)///////////////////////
	//////////////function for the info panel collapse button///////////////////////
	var collapsed = false;
    function collapse(){
    	if (collapsed == false){
    		document.getElementById("infoPanel").style.transition = "display 2s";
    		document.getElementById("infoPanel").style.display = "none";
    		document.getElementById("collapse").style.left = '0px';
    		document.getElementById("collapse").style.paddingLeft = '2px';
    		document.getElementById("collapse-arrow").className = "fa fa-chevron-right";
    		collapsed = true;
    	} else{
    		document.getElementById("infoPanel").style.display = "unset";
    		document.getElementById("collapse").style.left = '320px';
    		document.getElementById("collapse").style.paddingLeft = '0px';
    		document.getElementById("collapse-arrow").className = "fa fa-chevron-left";
    		collapsed = false;
    	}
    	
    }
//////////////Initialize map///////////////////////
	var map = L.map('map', {center: [45.56, -119.75], zoom: 7, zoomControl:false});
///////////////////////make zoom level correspond to browser size////////////////////////////////
	window.addEventListener('load', function(event){
    	var width = document.documentElement.clientWidth;
    	if (width < 1500 && width > 800) {
        	map.setView(new L.LatLng(45.56, -121.75), 6); 
    		}  else if (width > 1501) {
        	map.setZoom(7);
        	} else {
        	map.setZoom(5);
        	}
        update();
	});
////////////////////////////////basemap layers////////////////////////////////
	var Esri_WorldTerrain = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}', {
		attribution: 'Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS',
		maxZoom:8,
		minZoom:4
	}).addTo(map);
	
	var label = L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_only_labels/{z}/{x}/{y}@2x.png', {
		attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
		subdomains: 'abcd',
		maxZoom:10,
		minZoom:5,
		tileSize:256,
		bounds:[
			new L.LatLng(49.56,-125.25),
			new L.LatLng(40.5,-111.5)
		],
		pane:'labels'
	});
	
	var pnwCover = L.tileLayer.wms('http://mapious.ceoas.oregonstate.edu/geoserver/baldricg_PNW_ATLAS/wms', {
		layers: 'baldricg_PNW_ATLAS:pnw_outline2_black',
        format: 'image/png',
		maxZoom:11,
		minZoom:5,
		opacity:0.3,
		transparent:true,
	}).addTo(map);	

	map.createPane('labels');
	map.getPane('labels').style.pointerEvents = 'none';
	map.getPane('labels').style.zIndex = 650;
	label.addTo(map);
////////////////////////////////important variables////////////////////////////////		
	var data = 1;
	var water = 0;
	var stateLevels = [1000, 500, 250, 100, 500, 250, 100, 50, 250, 100, 50, 10];
    var dataValue = [0, 1, 2, 3];
    var colorValue = ['#045a8d','#2b8cbe','#74a9cf','#bdc9e1','#f1eef6'];

////////////////////////////////info control in upper right////////////////////////////////
    var info = L.control();

	info.onAdd = function (map) {
    	this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
    	this.update();
    	return this._div;
	};
	
	info.update = function (feature) {
	//detects whether or not a value is null
		function nullFinder() {
			if (dataType(feature) == null)
				{return 'N/A';}
			else if (isNaN(dataType(feature)) == true)
				{return 0.00;}
			else {return dataType(feature);}
		}

    //actual info display information
   		this._div.innerHTML = (feature ?
       		'<h2>' + feature.properties.NAME + ' County</h2><p3 id="displayType" style="display:inline;">' + nullFinder() + '&nbspMgal/day</p3><br/>'
        		: '<h2>Hover over map</h2>');
		};

	info.addTo(map);
////////////////////////////display layers//////////////////////
	////////////////////////////water use counties/////////////////////	      
	//connect color ramp to symbol levels, null values and zeros are shown in white
	function setColor(density){
        return density > stateLevels[dataValue[0]] ? colorValue[0] :
            density > stateLevels[dataValue[1]] ? colorValue[1] :
            density > stateLevels[dataValue[2]] ? colorValue[2] :
            density > stateLevels[dataValue[3]] ? colorValue[3] :
            density == null ? '#ffffff' :
            isNaN(density) ? '#ffffff' :
            density == 0 ? '#ffffff' :
            density == -1 ? '#ffffff' :
                colorValue[4];
    	}
    
    //style function 
	function dataType(feature){
		if (water == 0){
			return data == 1 ? feature.properties.tot_use:
    		 	data == 2 ? feature.properties.tot_pub:
    		 	data == 3 ? feature.properties.tot_dom:
    		 	data == 4 ? feature.properties.tot_ind:
    		 	data == 5 ? feature.properties.tot_therm:
    		 	data == 6 ? feature.properties.tot_mine:
    		 	data == 7 ? feature.properties.tot_live:
    		 	data == 8 ? feature.properties.tot_irr:
    		 		feature.properties.tot_aqua;
		}
		else if (water == 1){
			return data == 1 ? feature.properties.SW_use:
    		 	data == 2 ? feature.properties.SW_pub:
    		 	data == 3 ? feature.properties.SW_dom:
    		 	data == 4 ? feature.properties.SW_ind:
    		 	data == 5 ? feature.properties.SW_therm:
    		 	data == 6 ? feature.properties.SW_mine:
    		 	data == 7 ? feature.properties.SW_live:
    		 	data == 8 ? feature.properties.SW_irr:
    		 		feature.properties.SW_aqua;
		}
		else if (water == 2) {
			return data == 1 ? feature.properties.GW_use:
    		 	data == 2 ? feature.properties.GW_pub:
    		 	data == 3 ? feature.properties.GW_dom:
    		 	data == 4 ? feature.properties.GW_ind:
    		 	data == 5 ? feature.properties.GW_therm:
    		 	data == 6 ? feature.properties.GW_mine:
    		 	data == 7 ? feature.properties.GW_live:
    		 	data == 8 ? feature.properties.GW_irr:
    		 		feature.properties.GW_aqua;
		}
	}

	function waterStyle(feature) {
        		return {
            		fillColor: setColor(dataType(feature)),
            		fillOpacity: 0.7,
            		weight: 1,
            		opacity: 1,
            		color: '#ffffff',
        		};
    		}
	
	//highlight feature function
	function highlight(e) {
		 var layer = e.target;
		 layer.setStyle({
        	fillOpacity: 1,
        	color:'#ffffff',
        	dashArray: 4
    	 });
    	 layer.bringToFront();
		 info.update(layer.feature);
		}
	
	//reset feature function
	function resetHighlight(e) {
		 water_use.resetStyle(e.target);
		 info.update();
	}
	
	//add geoJSON to map
	var	water_use;
	
	function update() {
		if (water_use){
			map.removeLayer(water_use);
		}
		water_use = $.getJSON("assets/water_use.geojson", function(data){
        		water_use = L.geoJson(data, {
        			style:waterStyle,
        			onEachFeature: function(feature, featureLayer) {
        				featureLayer.on({
        					mouseover: highlight,
        					mouseout: resetHighlight,
   						});
   						featureLayer.bindPopup('<b>'+ dataType(feature) +'&nbspMgal/day</b>', {className: 'label_tooltip'});
        		}
       		 }).addTo(map);
    	});
    }
	    
///////////////////////////////button function and related functions////////////////////////////////	

     function titleText(){
     	function titleTextWater(){
     		return water == 0 ? "Water Use (Mgal/day)":
     			water == 1 ? "Surface Water Use (Mgal/day)":
     				"Groundwater Use (Mgal/day)";
    	 }
     	function titleTextUse(){
     		return data == 1 ? "Total&nbsp":
     			data == 2 ? "Public&nbsp":
     			data == 3 ? "Domestic&nbsp":
     			data == 4 ? "Industrial&nbsp":
     			data == 5 ? "Thermoelectric&nbsp":
     			data == 6 ? "Mining&nbsp":
     			data == 7 ? "Livestock&nbsp":
     			data == 8 ? "Irrigation&nbsp":
    				"Aquaculture&nbsp";
    	 }
    	 document.getElementById('title').innerHTML = titleTextUse() + titleTextWater();
     }
    var buttonLabels = ['#waterBut1','#waterBut2','#waterBut3'];

	var buttonFunctions = {
		but1: {button:'waterBut1', title:'Total Water', values:[0, 1, 2, 3], layerFunction:function(){water = 0; legend(); update(); titleText();}},
		but2: {button:'waterBut2', title:'Surface Water', values:[4, 5, 6, 7], layerFunction:function(){water = 1; legend(); update(); titleText();}},
		but3: {button:'waterBut3', title:'Groundwater', values:[8, 9, 10, 11], layerFunction:function(){water = 2; legend(); update(); titleText();}}
	};
	
	$('.main').clickFunction({
		buttonFunctions: buttonFunctions,
		buttonLabels: buttonLabels,
		titleContainer:'water',
		legendUpdate: true,
		selected:buttonFunctions.but1
	});

	var buttonLabels2 = ['#but1','#but2','#but3','#but4','#but5','#but6','#but7','#but8','#but9'];

	var buttonFunctions2 = {
		but1: {button:'but1', title:'Total', variable:1, newElements:['facts_1'], imageSRC:"img/total.png", colors:['#045a8d','#2b8cbe','#74a9cf','#bdc9e1','#f1eef6'], legendDescription:'Water use in millions of gallons of water per day.', layerFunction:function(){stateLevels = [1000, 500, 250, 100, 500, 250, 100, 50, 250, 100, 50, 10]; legend(); update(); titleText();}},
		but2: {button:'but2', title:'Public', variable:2, newElements:['facts_2'], imageSRC:"img/public.png", colors:['#a50f15','#de2d26','#fb6a4a','#fcae91','#fee5d9'], legendDescription:'Public self-supplied water use in millions of gallons of water per day. Includes deliveries to domestic users.', layerFunction:function(){stateLevels = [50, 25, 10, 5, 25, 10, 5, 2.5, 25, 10, 5, 2.5]; legend(); update();titleText();}},
		but3: {button:'but3', title:'Domestic', variable:3, newElements:['facts_3'], imageSRC:"img/domestic.png", colors:['#006837','#31a354','#78c679','#c2e699','#ffffcc'], legendDescription:'Domestic self-supplied water use in millions of gallons of water per day. Does not include deliveries from public water providers.', layerFunction:function(){stateLevels = [10, 5, 2.5, 1, 0.5, 0.25, 0.1, 0.05, 10, 5, 2.5, 1]; legend(); update();titleText();}},
		but4: {button:'but4', title:'Industrial', variable:4, newElements:['facts_4'], imageSRC:"img/industry.png", colors:['#993404','#d95f0e','#fe9929','#fed98e','#fdedce'], legendDescription:'Industrial self-supplied water use in millions of gallons of water per day.', layerFunction:function(){stateLevels = [25, 10, 5, 2.5, 25, 10, 5, 2.5, 5, 2.5, 1, 0.5]; legend(); update();titleText();}},
		but5: {button:'but5', title:'Thermo', variable:5, newElements:['facts_5'], imageSRC:"img/thermo.png", colors:['#810f7c','#8856a7','#8c96c6','#b3cde3','#edf8fb'], legendDescription:'Self-supplied water use for thermoelectricity in millions of gallons of water per day.', layerFunction:function(){stateLevels = [20, 10, 5, 1, 20, 10, 5, 1, 1, 0.75, 0.5, 0.25]; legend(); update();titleText();}},
		but6: {button:'but6', title:'Mining', variable:6, newElements:['facts_6'], imageSRC:"img/mines.png", colors:['#734d26','#9e6934','#c48a4e','#d8b18a','#ecd9c6'], legendDescription:'Self-supplied water use for mining in millions of gallons of water per day.', layerFunction:function(){stateLevels = [2.5, 1, 0.5, 0.25, 1, 0.5, 0.25, 0.1, 1, 0.5, 0.25, 0.1]; legend(); update();titleText();}},
		but7: {button:'but7', title:'Livestock', variable:7, newElements:['facts_7'], imageSRC:"img/livestock.png", colors:['#666600','#959735','#c5ca81','#d8e39c','#f0f4d7'], legendDescription:'Self-supplied water use for livestock in millions of gallons of water per day.', layerFunction:function(){stateLevels = [2.5, 1, 0.5, 0.25, 1, 0.5, 0.25, 0.1, 2.5, 1, 0.25, 0.1]; legend(); update();titleText();}},
		but8: {button:'but8', title:'Irrigation', variable:8, newElements:['facts_8'], imageSRC:"img/irrigation.png", colors:['#006d2c','#31a354','#74c476','#bae4b3','#edf8e9'], legendDescription:'Self-supplied water use for irrigation in millions of gallons of water per day.', layerFunction:function(){stateLevels = [1000, 500, 250, 100, 500, 250, 100, 50, 250, 100, 50, 10]; legend(); update();titleText();}},
		but9: {button:'but9', title:'Aquaculture', variable:9, newElements:['facts_9'], imageSRC:"img/aqua.png", colors:['#004d38','#009970','#00cc99','#66ffd9','#ccfff2'], legendDescription:'Self-supplied water use for aquaculture in millions of gallons of water per day.', layerFunction:function(){stateLevels = [100, 50, 25, 10, 100, 50, 25, 10, 10, 5, 2.5, 1]; legend(); update();titleText();}},
	};
	
	$('.main2').clickFunction({
		buttonFunctions: buttonFunctions2,
		buttonLabels: buttonLabels2,
		imageDiv:'image2',
		legendUpdate: true,
		selected:buttonFunctions2.but1
	});
      
    function legend(){
      	document.getElementById('leg1_value').innerHTML = stateLevels[dataValue[0]] + "+";
    	document.getElementById('leg2_value').innerHTML = stateLevels[dataValue[1]] + " - " + stateLevels[dataValue[0]];
    	document.getElementById('leg3_value').innerHTML = stateLevels[dataValue[2]] + " - " + stateLevels[dataValue[1]];
    	document.getElementById('leg4_value').innerHTML = stateLevels[dataValue[3]] + " - " + stateLevels[dataValue[2]];
    	document.getElementById('leg5_value').innerHTML = "Less than " + stateLevels[dataValue[3]];
      	
      	resizeMiddle();
      } 
 ///////////////////////////////other miscellaneous functions (these also never change)////////////////////////////////   
       
   	//add zoom control
    new L.Control.Zoom({ position: 'topright' }).addTo(map);
    
    //remove leaflet attribution
	document.getElementsByClassName("leaflet-control-attribution")[0].style.visibility = "hidden";
	
	//add scrolling capabilities to text box
     var container = document.getElementById('text');
		Ps.initialize(container);
	
	//update text box to be correct size
	var minHeight = 50; // Define a minimum height for the middle div

	function resizeMiddle() {
    var h = $('body').height() - $('#top').height() - 95;
    		h = h > minHeight ? h : minHeight;
   	 	$('#attribution').height(h);
	}
	
	function resizePopup() {
   		var h = $('.popup').height() - 90;
    		h = h > minHeight ? h : minHeight;
   	 	$('.popup .content').height(h);
	}
	$(document).ready(resizePopup);
	$(window).resize(resizePopup);

	$(document).ready(resizeMiddle);
	$(window).resize(resizeMiddle);
	
    //remove standard leaflet attribution
    

</script>
</body>
</html>
