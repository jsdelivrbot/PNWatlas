<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
     <title>Water Pollution</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" /> 
    <link rel="stylesheet" href="css/water_maps_style.css" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Maven+Pro" rel="stylesheet">
    <link rel="stylesheet" href="css/perfect-scrollbar.css" />
    
    <link rel="shortcut icon" href="img/pnw.ico" type="image/x-icon">
    
    <meta property="og:title" content="Atlas of the Pacific Northwest: Water Pollution" />
    <meta property="og:url" content="https://rawgit.com/osulp/PNWatlas/master/water/pollution_index.html" />
    <meta property="og:description" content="Water Pollution maps of the Pacific Northwest."/>
    
    <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="js/perfect-scrollbar.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script type="text/javascript" src="../js/clickFunction.js"></script>
    
   
</head>
<body>
		<button id="collapse" onclick="collapse()">
			<i class="fa fa-chevron-left" id ="collapse-arrow" aria-hidden="true"></i>
		</button>
		<div id="infoPanel">
			<div id="top">
				<h1>Water Pollution</h1>
				<img src="img/pollution_icon.png" id="titleImageCircle" style="display:inline-block;">
				<div id="buttons">
					<div class="dropdown">
						<button class="dropbtn"><b id="dataType">Select Pollutant</b><p id="arrow">&#9660;</p></button>
						<div class="dropdown-content">
							 <button type="button" id="but1" class="selection" style="background:rgba(242, 242, 242, 0.8);">Total</button>
							 <button type="button" id="but2" class="selection">Metals</button>
							 <button type="button" id="but3" class="selection">Oxygen</button>
							 <button type="button" id="but4" class="selection">Pathogens</button>
							 <button type="button" id="but5" class="selection">Sediment</button>
							 <button type="button" id="but6" class="selection">Temperature</button>
							 <button type="button" id="but7" class="selection">Phosphorus</button>
							 <button type="button" id="but8" class="selection">Nitrogen</button>
							 <button type="button" id="but9" class="selection">Arsenic</button>
					   </div>
					</div>
				</div>
			</div>
			<div id="attribution">
				<div id="text">
					<h2 id="title">Total Impairments</h2><br/>
					<img src="img/pollution.png" id="pollutionImage" style="display:inline-block; float:right; right:-15px; margin-top:20px;"> 
					<div style="height:32px;"><b id="leg1_block" style="background:#a50f15; border-left:black 2px solid; border-right:black 2px solid; border-top:black 2px solid;"></b><p>&nbsp</p><p id="leg1" style="margin-left:5px;">50+</p></div>
					<div style="height:30px;"><b id="leg2_block" style="background:#de2d26; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg2" style="margin-left:5px;">25 - 50</p></div>
					<div style="height:30px;"><b id="leg3_block" style="background:#fb6a4a; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg3" style="margin-left:5px;">10 - 25</p></div>
					<div style="height:30px;"><b id="leg4_block" style="background:#fcae91; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg4" style="margin-left:5px;">5 - 10</p></div>
					<div style="height:32px;"><b id="leg5_block" style="background:#fee5d9; border-left:black 2px solid; border-right:black 2px solid; border-bottom:black 2px solid;"></b><p>&nbsp</p><p id="leg5" style="margin-left:5px;">Less than 5</p></div><br/>
					<p id="description" style="font-weight:bold; text-align:justify; white-space:normal; padding-left:0px; width:280px; display:block; position:relative;">Total impairments in waterways. These include Metals, Sediments, Algae, Pathogens, Oxygen Impairment, Ammonia, and more.</p>
					<p3 id ="source" style="font-style:italic; text-align:justify; white-space:normal; padding-left:0px; width:280px; display:block; position:relative;">Impaired waters are listed in the 2015 303(d) list provided by the U.S Environmental Protection Agency.</p3>
						<br/>
						<label class="switch">
							<input name="checkbox_name" id="checkbox_id" type="checkbox" value="check" onclick="borders()" autocomplete="off">
							<span class="slider"></span>
						</label>
						<p style="padding-left:5px; padding-top:6px; font-weight:bold;">Toggle Borders</p><br/>
					</div>
				</div>
				<div id="pageChange">
					<a href="#sources" id="arrow" style="display:inline-block;">
						<i class="fa fa-info-circle" aria-hidden="true" style="padding-left:90px;"></i>
					</a>
					<a href="#link_popup" id="arrow" style="display:inline-block;">
						<i class="fa fa-home" aria-hidden="true" style="padding-left:0;"></i>
					</a>
					<a href="#share" class="share" id="arrow" style="display:inline-block;">
						<i class="fa fa-share-alt " aria-hidden="true" style="padding-left:0;"></i>
					</a>
				</div>
			</div>
		</div>
    	<div id="map" style="width: 100%; height: 100%;"></div>
    	
    	<div id="sources" class="overlay">
			<div class="popup">
				<h2 style="display:inline; font-size:32px;">Sources</h2>
				<a class="close" href="#" style="display:inline;">×</a>
				<hr>
				<div class="content">
					<p2 style="font-size:20px">Geographic Data</p2><br><br/>
                    <div class="source">
                    	<b><p2>303(d) Pollutant Listings: <a href = "https://www.epa.gov/waterdata/waters-geospatial-data-downloads" target="_blank">U.S Environmental Protection Data</a></p2></b><br>
                    		<p3>Notes: Midpoints were calculated and counted in each hex on the grid. Process repeated for different categories. Data from 2015.</p3>
                    </div>
                    <div class="source">
                    	<b><p2>Nitrogen and Phosphorus Inputs: <a href = "https://catalog.data.gov/dataset/attributes-for-mrb-e2rf1-catchments-by-major-river-basins-in-the-conterminous-united-state-20026aff2" target="_blank">USGS SPARROW Model</a></p2></b><br>
                    		<p3>Notes: Joined with catchments. Midpoints calculated and counted in each hex on the grid. Data from 2003.</p3>
                    </div>
                    <div class="source">
                    	<b><p2>Catchment Areas: <a href = "https://catalog.data.gov/dataset/attributes-for-mrb-e2rf1-catchments-by-major-river-basins-in-the-conterminous-united-state-20024c1a4" target="_blank">USGS SPARROW Model</a></p2></b><br>
                    		<p3>Notes: Joined with nitrogen and phosphorus inputs.</p3>
                    </div>
                    <div class="source">
                    	<b><p2>Arsenic points: <a href = "https://water.usgs.gov/nawqa/trace/pubs/geo_v46n11/index.html" target="_blank">USGS National Water-Quality Assessment Program</a></p2></b><br>
                    		<p3>Notes: Points were counted in each grid. 3rd Quartile value was calculated for each hexgrid. Data from 2001</p3>
                    </div>
				</div>
				<hr>
				<p2 style="float:right; font-size:12px;">Map created with Leaflet.</p2>
				<br/>
				<a class="close2" href="#" style="display:inline;">Close</a>
			</div>
		</div>
		
		<div id="link_popup" class="link_overlay">
			<div class="link_popup">
				<a class="close" href="#" style="display:inline;">×</a>
				<div class="content">
					<a href="water_index.html" style="font-weight:bold; text-decoration:none;">Water Home</a>
					<hr>
					<a href="watershed.html" style="text-decoration:underline;">Watersheds</a>
					<a href="groundwater.html" style="text-decoration:underline;">Groundwater</a>
					<a href="water_use.html" style="text-decoration:underline;">Water Use</a>
					<a href="pollution.html" style="text-decoration:underline;">Water Pollution</a>
					<hr>
					<a href="../index.html" style="font-weight:bold; text-decoration:none;">Atlas Home</a>
				</div>
			</div>
		</div>
		
		<div id="share" class="share_overlay">
			<div class="share_popup">
				<a id="clear" href="#" style="display:none;">×</a>
				<div class="content">
					<a href="https://facebook.com/sharer.php?u=https://rawgit.com/osulp/PNWatlas/master/water/pollution_index.html" id="arrow" style="display:inline-block;">
						<i class="fa fa-facebook-square " aria-hidden="true" style="padding-left:0;"></i>
					</a>
					<a href="https://twitter.com/home?status=PNW%20Water Pollution%0Ahttp%3A//rawgit.com/osulp/PNWatlas/master/water/pollution_index.html" id="arrow" style="display:inline-block;">
						<i class="fa fa-twitter-square " aria-hidden="true" style="padding-left:0;"></i>
					</a>
					<a href="" id="arrow" style="display:inline-block;">
						<i class="fa fa-linkedin-square " aria-hidden="true" style="padding-left:0;"></i>
					</a>
				</div>
			</div>
		</div>
<script>
//////////////base functions (these never change)///////////////////////
	//////////////function for the info panel collapse button///////////////////////
	var collapsed = false;
    function collapse(){
    	if (collapsed == false){
    		document.getElementById("infoPanel").style.transition = "display 2s";
    		document.getElementById("infoPanel").style.display = "none";
    		document.getElementById("collapse").style.left = '0px';
    		document.getElementById("collapse").style.paddingLeft = '2px';
    		document.getElementById("collapse-arrow").className = "fa fa-chevron-right";
    		collapsed = true;
    	} else{
    		document.getElementById("infoPanel").style.display = "unset";
    		document.getElementById("collapse").style.left = '320px';
    		document.getElementById("collapse").style.paddingLeft = '0px';
    		document.getElementById("collapse-arrow").className = "fa fa-chevron-left";
    		collapsed = false;
    	}
    	
    }
//////////////Initialize map///////////////////////
	var map = L.map('map', {center: [45.61, -119.75], zoom: 7, zoomControl:false});
	//map.setMaxBounds(map.getBounds());
///////////////////////make zoom level correspond to browser size////////////////////////////////
	window.addEventListener('load', function(event){
    	var width = document.documentElement.clientWidth;
    	if (width < 1500 && width > 800) {
        	map.setView(new L.LatLng(45.56, -121.75), 6); 
    		}  else if (width > 1501) {
        	map.setZoom(7);
        	} else {
        	map.setZoom(5);
        	}
	});
	
////////////////////////////////basemap layers////////////////////////////////
	var Esri_WorldTerrain = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}', {
		attribution: 'Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS',
		maxZoom:8,
		minZoom:5,
		opacity:1
	}).addTo(map);

	var pnwCover = L.tileLayer.wms('http://mapious.ceoas.oregonstate.edu/geoserver/baldricg_PNW_ATLAS/wms', {
		layers: 'baldricg_PNW_ATLAS:pnw_outline2_black',
        format: 'image/png',
		maxZoom:8,
		minZoom:5,
		opacity:0.3,
		transparent:true,
	}).addTo(map);

	
	var label = L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_only_labels/{z}/{x}/{y}@2x.png', {
		attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
		subdomains: 'abcd',
		maxZoom:8,
		minZoom:5,
		tileSize:256,
		bounds:[
			new L.LatLng(49.56,-125.25),
			new L.LatLng(40.5,-111.5)
		],
		pane:'labels'
	});	

	var pnw_water = L.tileLayer.wms('http://mapious.ceoas.oregonstate.edu/geoserver/baldricg_PNW_ATLAS/wms', {
		layers: 'baldricg_PNW_ATLAS:pnw_water',
        format: 'image/png',
		maxZoom:8,
		minZoom:5,
		opacity:1,
		transparent:true,
		pane: 'water'
	});
	
	var pnwBorders = L.tileLayer.wms('http://mapious.ceoas.oregonstate.edu/geoserver/baldricg_PNW_ATLAS/wms', {
		layers: 'baldricg_PNW_ATLAS:pnw_borders_black',
        format: 'image/png',
		maxZoom:10,
		minZoom:5,
		opacity:0.5,
		transparent:true,
		pane: 'borders'
	});
//create pane to add labels above basemap and geojson features
	map.createPane('borders');
	map.getPane('borders').style.pointerEvents = 'none';
	map.getPane('borders').style.zIndex = 800;
		
    var border = 0;
    function borders() {
    	if (border == 0){
    		border = 1;
    		pnwBorders.addTo(map);
    	}
    	else {
    		border = 0;
    		map.removeLayer(pnwBorders);
    	}
    } 
    
	map.createPane('labels');
	map.getPane('labels').style.pointerEvents = 'none';
	map.getPane('labels').style.zIndex = 650;
	label.addTo(map);
	
	map.createPane('water');
	map.getPane('water').style.pointerEvents = 'none';
	map.getPane('water').style.zIndex = 675;
	pnw_water.addTo(map);
	
	map.createPane('tooltip');
	map.getPane('tooltip').style.zIndex = 700;
/////////////////important variables////////////////////////////////
	var data = 1;
	var colorValue = ['#fee5d9','#fcae91','#fb6a4a','#de2d26','#a50f15'];
	var dataValue = [0, 5, 10, 25, 50];
////////////////////////////////info control in upper right////////////////////////////////

    var info = L.control();

	info.onAdd = function (map) {
    	this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
    	this.update();
    	return this._div;
	};
	
	info.update = function (props) {
    this._div.innerHTML =   ('<h2 style="margin:0; display:inline-block;">Hover over Water Features</h2>');
	};

	info.addTo(map);
////////////////////////////display layers//////////////////////
	////////////////////////////hexgrid layers//////////////////////
	function hexColor (value){
        	return value > dataValue[4] ? colorValue[4] :
        			value > dataValue[3] ? colorValue[3] :
        			value > dataValue[2] ? colorValue[2] :
        			value > dataValue[1] ? colorValue[1] :
        			value > dataValue[0] ? colorValue[0] :
        				'#ffffff';
        	}
	
	function whichProp (feature){
		return data == 1 ? feature.properties.pol_points:
			data == 2 ? feature.properties.metals:
			data == 3 ? feature.properties.oxgyen_dep:
			data == 4 ? feature.properties.pathogens:
			data == 5 ? feature.properties.sediment:
			data == 6 ? feature.properties.temp:
			data == 7 ? (feature.properties.meanTOT_P/1000).toFixed(2):
			data == 8 ? (feature.properties.meanTOT_N/1000).toFixed(2):
			data == 9 ? feature.properties.AS_quart3:
			feature.properties.pol_points;
	}
	
	function hexStyle(feature){
		return{
			opacity: 0.1,
			fillOpacity:0.8,
			fillColor:hexColor(whichProp(feature)),
			color:hexColor(whichProp(feature)),
			};
	}
	
	function hexFilter(feature) {
        		if (data == 1){
        			if (feature.properties.pol_points > 0)return true
        		}
        		else if (data == 2){
        			if (feature.properties.metals > 0)return true
        		}
        		else if (data == 3){
        			if (feature.properties.oxgyen_dep > 0)return true
        		}
        		else if (data == 4){
        			if (feature.properties.pathogens > 0)return true
        		}
        		else if (data == 5){
        			if (feature.properties.sediment > 0)return true
        		}
        		else if (data == 6){
        			if (feature.properties.temp > 0)return true
        		}
        		else if (data == 7){
        			if (feature.properties.meanTOT_P > 0)return true
        		}
        		else if (data == 8){
        			if (feature.properties.meanTOT_N > 0)return true
        		}
        		else if (data == 9){
        			if (feature.properties.AS_quart3 > 0)return true
        		}
    	}
    
    function highlight(e) {
		 var layer = e.target;
		 layer.setStyle({
        	fillOpacity: 1,
    	 });
    	 layer.bringToFront();
		 info.update(layer.feature);
		}
	
	//reset feature function
	function resetHighlight(e) {
		 hexgrid.resetStyle(e.target);
		 info.update();
	}	
    
    var	hexgrid = $.getJSON("assets/pollution_hexgrid.geojson", function(data){
        hexgrid = L.geoJson(data, {
        	style:hexStyle,
        	onEachFeature: function(feature, featureLayer) {
        		featureLayer.on({
        					mouseover: highlight,
        					mouseout: resetHighlight,
   						});
        		featureLayer.bindTooltip('<b style="display:inline;">Total Impairments:&nbsp</b>'+ feature.properties.pol_points, {direction:'top', pane:'tooltip', className: 'label_tooltip'});
        	},
        	filter:hexFilter
        }).addTo(map);
    });
    
    function addHexgrid (){
    	if (hexgrid){
    		map.removeLayer(hexgrid);
    	}
    	function popupText(feature){
    		return data == 1 ? '<b style="display:inline;">Total Impairments:&nbsp</b>' + feature.properties.pol_points :
				data == 2 ? '<b style="display:inline;">Metal Impairments:&nbsp</b>' + feature.properties.metals:
				data == 3 ? '<b style="display:inline;">Oxygen Impairments:&nbsp</b>' + feature.properties.oxgyen_dep:
				data == 4 ? '<b style="display:inline;">Pathogen Impairments:&nbsp</b>' + feature.properties.pathogens:
				data == 5 ? '<b style="display:inline;">Sediment Impairments:&nbsp</b>' + feature.properties.sediment:
				data == 6 ? '<b style="display:inline;">Temperature Impairments:&nbsp</b>' + feature.properties.temp:
				data == 7 ? '<b style="display:inline;">P in Thousands KG/year:&nbsp</b>' + (feature.properties.meanTOT_P/1000).toFixed(2):
				data == 8 ? '<b style="display:inline;">N in Thousands KG/year:&nbsp</b>' + (feature.properties.meanTOT_N/1000).toFixed(2):
				data == 9 ? '<b style="display:inline;">Arsenic in &#xb5;/L:&nbsp</b>' +  feature.properties.AS_quart3 + '<br/><b># of Samples:&nbsp</b>' +  feature.properties.AS_pts:
				'<b style="display:inline;">Total Pollutants<br/></b>';
    	}
    	hexgrid = $.getJSON("assets/pollution_hexgrid.geojson", function(data){
        	hexgrid = L.geoJson(data, {
        		style:hexStyle,
        		onEachFeature: function(feature, featureLayer) {
        			featureLayer.bindTooltip(popupText(feature), {direction:'top', pane:'tooltip', className: 'label_tooltip'});
        		},
        	filter:hexFilter
        }).addTo(map);
    });
    }
///////////////////////////////button function////////////////////////////////	    
    var buttonLabels = ['#but1','#but2','#but3','#but4','#but5','#but6','#but7','#but8','#but9'];

	var buttonFunctions = {
		but1: {button:'but1', title:'Total', variable:1, legendTitle:'Total Impairments', colors:['#fee5d9','#fcae91','#fb6a4a','#de2d26','#a50f15'], values:[0, 5, 10, 25, 50], imageSRC:'img/pollution.png', legendDescription:"Total impairments in waterways. Impairments include Metals, Sediments, Algae, Pathogens, Oxygen Impairment, Ammonia, and more.", layerFunction:function(){addHexgrid();changeLegend();document.getElementById('source').innerHTML = "Impaired waters are listed in the 2015 303(d) list provided by the U.S Environmental Protection Agency.";}},
		but2: {button:'but2', title:'Metals', variable:2, legendTitle:'Metal Impairments', colors:['#e5e5cc','#cbcb9a','#b1b168','#76763d','#434323'], values:[0, 2, 5, 10, 20], imageSRC:'img/mining.png', legendDescription:"Total metal impairments in waterways. Metals can include Mercury, Iron, Lead, Manganese, Nickel, Zinc, and More.", layerFunction:function(){addHexgrid();changeLegend();document.getElementById('source').innerHTML = "Impaired waters are listed in the 2015 303(d) list provided by the U.S Environmental Protection Agency.";}},
		but3: {button:'but3', title:'Oxygen', variable:3, legendTitle:'Oxygen Depletion Impairments', colors:['#e0ebeb','#b1cdcd','#83afaf','#507c7c','#283e3e'], values:[0, 2, 5, 10, 20], imageSRC:'img/oxygen.png', legendDescription:"Total oxygen impairments in waterways. Oxygen depletion is usually caused by organic enrichment.", layerFunction:function(){addHexgrid();changeLegend();document.getElementById('source').innerHTML = "Impaired waters are listed in the 2015 303(d) list provided by the U.S Environmental Protection Agency.";}},
		but4: {button:'but4', title:'Pathogens', variable:4, legendTitle:'Pathogen Impairments', colors:['#f1eef6','#d7b5d8','#df65b0','#dd1c77','#980043'], values:[0, 5, 10, 15, 20], imageSRC:'img/pathogen.png', legendDescription:"Total pathogen impairments in waterways. Pathogens include E. Coli and Fecal Coliform.", layerFunction:function(){addHexgrid();changeLegend();document.getElementById('source').innerHTML = "Impaired waters are listed in the 2015 303(d) list provided by the U.S Environmental Protection Agency.";}},
		but5: {button:'but5', title:'Sediment', variable:5, legendTitle:'Sediment Impairments', colors:['#ecd9c6','#d9b38c','#c68c53','#996633','#4d3319'], values:[0, 4, 6, 8, 10], imageSRC:'img/sediment.png', legendDescription:"Total sediment impairments in waterways.", layerFunction:function(){addHexgrid();changeLegend();document.getElementById('source').innerHTML = "Impaired waters are listed in the 2015 303(d) list provided by the U.S Environmental Protection Agency.";}},
		but6: {button:'but6', title:'Temperature', variable:6, legendTitle:'Temperature Impairments', colors:['#f2f0f7','#cbc9e2','#9e9ac8','#756bb1','#54278f'], values:[0, 5, 10, 15, 20], imageSRC:'img/temp.png', legendDescription:"Total temperature impairments in each waterways.", layerFunction:function(){addHexgrid();changeLegend();document.getElementById('source').innerHTML = "Impaired waters are listed in the 2015 303(d) list provided by the U.S Environmental Protection Agency.";}},
		but7: {button:'but7', title:'Phosphorus', variable:7, legendTitle:'Phosphorus Inputs (1000s KG/yr)', colors:['#edf8fb','#b3cde3','#8c96c6','#8856a7','#810f7c'], values:[0, 5, 10, 50, 100], imageSRC:'img/phosphorus.png', legendDescription:"Total phosphorus input to water in thousands of KG/yr in 2002.", layerFunction:function(){addHexgrid();changeLegend();document.getElementById('source').innerHTML = "Data compiled by U.S Geological Survey.";}},
		but8: {button:'but8', title:'Nitrogen', variable:8, legendTitle:'Nitrogen Inputs (1000s KG/yr)', colors:['#fff0b3','#ffe066','#ffd11a','#cca300','#806600'], values:[0, 10, 50, 250, 1000], imageSRC:'img/nitrogen.png', legendDescription:"Total nitrogen input to water in thousands of KG/yr in 2002.", layerFunction:function(){addHexgrid();changeLegend();document.getElementById('source').innerHTML = "Data compiled by U.S Geological Survey.";}},
		but9: {button:'but9', title:'Arsenic', variable:9, legendTitle:'Arsenic Concentrations in Groundwater (&#xb5;/L)', colors:['#2c7bb6','#abd9e9','#ffffbf','#fdae61','#d7191c'], values:[0, 3, 5, 10, 50], imageSRC:'img/pollution.png', legendDescription:"Total impairments in waterways. Impairments include Metals, Sediments, Algae, Pathogens, Oxygen Impairment, Ammonia, and more.", layerFunction:function(){addHexgrid();changeLegend();document.getElementById('source').innerHTML = "Data obtained from 2003 Trace Elements National Synthesis Project compiled by U.S Geological Survey.";}}
	};
	
	$('.main').clickFunction({
		buttonFunctions: buttonFunctions,
		buttonLabels: buttonLabels,
		imageDiv:'pollutionImage',
		legendUpdate: true,
		selected:buttonFunctions.but1
	});

    function changeLegend(){
    	document.getElementById('leg1').innerHTML = dataValue[4] + "+";
    	document.getElementById('leg2').innerHTML = dataValue[3] + " - " + dataValue[4];
    	document.getElementById('leg3').innerHTML = dataValue[2] + " - " + dataValue[3];
    	document.getElementById('leg4').innerHTML = dataValue[1] + " - " + dataValue[2];
    	document.getElementById('leg5').innerHTML = "Less than " + dataValue[1];
    	
    	resizeMiddle();
    }

///////////////////////////////other miscellaneous functions (these also never change)////////////////////////////////   

    new L.Control.Zoom({ position: 'topright' }).addTo(map);
	document.getElementsByClassName("leaflet-control-attribution")[0].style.visibility = "hidden";
	//add scrolling capabilities to text box
     var container = document.getElementById('text');
		Ps.initialize(container);
	
	var minHeight = 30; // Define a minimum height for the middle div

	function resizeMiddle() {
    var h = $('body').height() - $('#top').height() - 80;
    		h = h > minHeight ? h : minHeight;
   	 	$('#attribution').height(h);
	}
	
	function resizePopup() {
   		var h = $('.popup').height() - 90;
    		h = h > minHeight ? h : minHeight;
   	 	$('.popup .content').height(h);
	}
	$(document).ready(resizePopup);
	$(window).resize(resizePopup);

	$(document).ready(resizeMiddle);
	$(window).resize(resizeMiddle);
	
	
    //remove standard leaflet attribution
    $(document).click(function(event) {
		if (!$(event.target).closest(".share_overlay,.share").length) {
			$('#clear')[0].click();
		}
	});


</script>
</body>
</html>
